{"ast":null,"code":"import { AuthContext, AuthenticateWithRedirectCallback, ClerkLoaded, ClerkLoading, IsomorphicClerkContext, Protect, RedirectToCreateOrganization, RedirectToOrganizationProfile, RedirectToSignIn, RedirectToSignUp, RedirectToUserProfile, SignedIn, SignedOut, customLinkWrongProps, customPageWrongProps, customPagesIgnoredComponent, errorThrower, loadClerkJsScript, multipleChildrenInButtonComponent, multipleClerkProvidersError, organizationProfileLinkRenderedError, organizationProfilePageRenderedError, setErrorThrowerOptions, unsupportedNonBrowserDomainOrProxyUrlFunction, useAuth, useClerk, useEmailLink, useOrganization, useOrganizationList, useSession, useSessionList, useSignIn, useSignUp, useUser, userProfileLinkRenderedError, userProfilePageRenderedError, withClerk } from \"./chunk-TWVGTLGA.mjs\";\nimport { __privateAdd, __privateGet, __privateMethod, __privateSet } from \"./chunk-XUI43LEZ.mjs\"; // src/polyfills.ts\n\nif (typeof window !== \"undefined\" && !window.global) {\n  window.global = typeof global === \"undefined\" ? window : global;\n} // src/components/uiComponents.tsx\n\n\nimport { logErrorInDevMode as logErrorInDevMode2, without } from \"@clerk/shared\";\nimport { isDeeplyEqual } from \"@clerk/shared/react\";\nimport React5, { createElement } from \"react\"; // src/utils/childrenUtils.tsx\n\nimport React from \"react\";\n\nvar assertSingleChild = children => name => {\n  try {\n    return React.Children.only(children);\n  } catch (e) {\n    return errorThrower.throw(multipleChildrenInButtonComponent(name));\n  }\n};\n\nvar normalizeWithDefaultValue = (children, defaultText) => {\n  if (!children) {\n    children = defaultText;\n  }\n\n  if (typeof children === \"string\") {\n    children = /* @__PURE__ */React.createElement(\"button\", null, children);\n  }\n\n  return children;\n};\n\nvar safeExecute = cb => function () {\n  if (cb && typeof cb === \"function\") {\n    return cb(...arguments);\n  }\n}; // src/utils/isConstructor.ts\n\n\nfunction isConstructor(f) {\n  return typeof f === \"function\";\n} // src/utils/useMaxAllowedInstancesGuard.tsx\n\n\nimport React2 from \"react\";\nvar counts = /* @__PURE__ */new Map();\n\nfunction useMaxAllowedInstancesGuard(name, error) {\n  let maxCount = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  React2.useEffect(() => {\n    const count = counts.get(name) || 0;\n\n    if (count == maxCount) {\n      return errorThrower.throw(error);\n    }\n\n    counts.set(name, count + 1);\n    return () => {\n      counts.set(name, (counts.get(name) || 1) - 1);\n    };\n  }, []);\n}\n\nfunction withMaxAllowedInstancesGuard(WrappedComponent, name, error) {\n  const displayName = WrappedComponent.displayName || WrappedComponent.name || name || \"Component\";\n\n  const Hoc = props => {\n    useMaxAllowedInstancesGuard(name, error);\n    return /* @__PURE__ */React2.createElement(WrappedComponent, { ...props\n    });\n  };\n\n  Hoc.displayName = `withMaxAllowedInstancesGuard(${displayName})`;\n  return Hoc;\n} // src/utils/useCustomElementPortal.tsx\n\n\nimport React3, { useState } from \"react\";\nimport { createPortal } from \"react-dom\";\n\nvar useCustomElementPortal = elements => {\n  const initialState = Array(elements.length).fill(null);\n  const [nodes, setNodes] = useState(initialState);\n  return elements.map((el, index) => ({\n    id: el.id,\n    mount: node => setNodes(prevState => prevState.map((n, i) => i === index ? node : n)),\n    unmount: () => setNodes(prevState => prevState.map((n, i) => i === index ? null : n)),\n    portal: () => /* @__PURE__ */React3.createElement(React3.Fragment, null, nodes[index] ? createPortal(el.component, nodes[index]) : null)\n  }));\n}; // src/utils/useCustomPages.tsx\n\n\nimport { logErrorInDevMode } from \"@clerk/shared\";\nimport React4 from \"react\";\n\nvar isThatComponent = (v, component) => {\n  return !!v && React4.isValidElement(v) && (v == null ? void 0 : v.type) === component;\n};\n\nvar useUserProfileCustomPages = children => {\n  const reorderItemsLabels = [\"account\", \"security\"];\n  return useCustomPages({\n    children,\n    reorderItemsLabels,\n    LinkComponent: UserProfileLink,\n    PageComponent: UserProfilePage,\n    componentName: \"UserProfile\"\n  });\n};\n\nvar useOrganizationProfileCustomPages = children => {\n  const reorderItemsLabels = [\"general\", \"members\"];\n  return useCustomPages({\n    children,\n    reorderItemsLabels,\n    LinkComponent: OrganizationProfileLink,\n    PageComponent: OrganizationProfilePage,\n    componentName: \"OrganizationProfile\"\n  });\n};\n\nvar useCustomPages = _ref => {\n  let {\n    children,\n    LinkComponent,\n    PageComponent,\n    reorderItemsLabels,\n    componentName\n  } = _ref;\n  const validChildren = [];\n  React4.Children.forEach(children, child => {\n    if (!isThatComponent(child, PageComponent) && !isThatComponent(child, LinkComponent)) {\n      if (child) {\n        logErrorInDevMode(customPagesIgnoredComponent(componentName));\n      }\n\n      return;\n    }\n\n    const {\n      props\n    } = child;\n    const {\n      children: children2,\n      label,\n      url,\n      labelIcon\n    } = props;\n\n    if (isThatComponent(child, PageComponent)) {\n      if (isReorderItem(props, reorderItemsLabels)) {\n        validChildren.push({\n          label\n        });\n      } else if (isCustomPage(props)) {\n        validChildren.push({\n          label,\n          labelIcon,\n          children: children2,\n          url\n        });\n      } else {\n        logErrorInDevMode(customPageWrongProps(componentName));\n        return;\n      }\n    }\n\n    if (isThatComponent(child, LinkComponent)) {\n      if (isExternalLink(props)) {\n        validChildren.push({\n          label,\n          labelIcon,\n          url\n        });\n      } else {\n        logErrorInDevMode(customLinkWrongProps(componentName));\n        return;\n      }\n    }\n  });\n  const customPageContents = [];\n  const customPageLabelIcons = [];\n  const customLinkLabelIcons = [];\n  validChildren.forEach((cp, index) => {\n    if (isCustomPage(cp)) {\n      customPageContents.push({\n        component: cp.children,\n        id: index\n      });\n      customPageLabelIcons.push({\n        component: cp.labelIcon,\n        id: index\n      });\n      return;\n    }\n\n    if (isExternalLink(cp)) {\n      customLinkLabelIcons.push({\n        component: cp.labelIcon,\n        id: index\n      });\n    }\n  });\n  const customPageContentsPortals = useCustomElementPortal(customPageContents);\n  const customPageLabelIconsPortals = useCustomElementPortal(customPageLabelIcons);\n  const customLinkLabelIconsPortals = useCustomElementPortal(customLinkLabelIcons);\n  const customPages = [];\n  const customPagesPortals = [];\n  validChildren.forEach((cp, index) => {\n    if (isReorderItem(cp, reorderItemsLabels)) {\n      customPages.push({\n        label: cp.label\n      });\n      return;\n    }\n\n    if (isCustomPage(cp)) {\n      const {\n        portal: contentPortal,\n        mount,\n        unmount\n      } = customPageContentsPortals.find(p => p.id === index);\n      const {\n        portal: labelPortal,\n        mount: mountIcon,\n        unmount: unmountIcon\n      } = customPageLabelIconsPortals.find(p => p.id === index);\n      customPages.push({\n        label: cp.label,\n        url: cp.url,\n        mount,\n        unmount,\n        mountIcon,\n        unmountIcon\n      });\n      customPagesPortals.push(contentPortal);\n      customPagesPortals.push(labelPortal);\n      return;\n    }\n\n    if (isExternalLink(cp)) {\n      const {\n        portal: labelPortal,\n        mount: mountIcon,\n        unmount: unmountIcon\n      } = customLinkLabelIconsPortals.find(p => p.id === index);\n      customPages.push({\n        label: cp.label,\n        url: cp.url,\n        mountIcon,\n        unmountIcon\n      });\n      customPagesPortals.push(labelPortal);\n      return;\n    }\n  });\n  return {\n    customPages,\n    customPagesPortals\n  };\n};\n\nvar isReorderItem = (childProps, validItems) => {\n  const {\n    children,\n    label,\n    url,\n    labelIcon\n  } = childProps;\n  return !children && !url && !labelIcon && validItems.some(v => v === label);\n};\n\nvar isCustomPage = childProps => {\n  const {\n    children,\n    label,\n    url,\n    labelIcon\n  } = childProps;\n  return !!children && !!url && !!labelIcon && !!label;\n};\n\nvar isExternalLink = childProps => {\n  const {\n    children,\n    label,\n    url,\n    labelIcon\n  } = childProps;\n  return !children && !!url && !!labelIcon && !!label;\n}; // src/components/uiComponents.tsx\n\n\nvar isMountProps = props => {\n  return \"mount\" in props;\n};\n\nvar isOpenProps = props => {\n  return \"open\" in props;\n};\n\nvar Portal = class extends React5.PureComponent {\n  constructor() {\n    super(...arguments);\n    this.portalRef = React5.createRef();\n  }\n\n  componentDidUpdate(_prevProps) {\n    var _a, _b;\n\n    if (!isMountProps(_prevProps) || !isMountProps(this.props)) {\n      return;\n    }\n\n    const prevProps = without(_prevProps.props, \"customPages\", \"children\");\n    const newProps = without(this.props.props, \"customPages\", \"children\");\n    const customPagesChanged = ((_a = prevProps.customPages) == null ? void 0 : _a.length) !== ((_b = newProps.customPages) == null ? void 0 : _b.length);\n\n    if (!isDeeplyEqual(prevProps, newProps) || customPagesChanged) {\n      this.props.updateProps({\n        node: this.portalRef.current,\n        props: this.props.props\n      });\n    }\n  }\n\n  componentDidMount() {\n    if (this.portalRef.current) {\n      if (isMountProps(this.props)) {\n        this.props.mount(this.portalRef.current, this.props.props);\n      }\n\n      if (isOpenProps(this.props)) {\n        this.props.open(this.props.props);\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.portalRef.current) {\n      if (isMountProps(this.props)) {\n        this.props.unmount(this.portalRef.current);\n      }\n\n      if (isOpenProps(this.props)) {\n        this.props.close();\n      }\n    }\n  }\n\n  render() {\n    var _a, _b;\n\n    return /* @__PURE__ */React5.createElement(React5.Fragment, null, /* @__PURE__ */React5.createElement(\"div\", {\n      ref: this.portalRef\n    }), isMountProps(this.props) && ((_b = (_a = this.props) == null ? void 0 : _a.customPagesPortals) == null ? void 0 : _b.map((portal, index) => createElement(portal, {\n      key: index\n    }))));\n  }\n\n};\nvar SignIn = withClerk(_ref2 => {\n  let {\n    clerk,\n    ...props\n  } = _ref2;\n  return /* @__PURE__ */React5.createElement(Portal, {\n    mount: clerk.mountSignIn,\n    unmount: clerk.unmountSignIn,\n    updateProps: clerk.__unstable__updateProps,\n    props\n  });\n}, \"SignIn\");\nvar SignUp = withClerk(_ref3 => {\n  let {\n    clerk,\n    ...props\n  } = _ref3;\n  return /* @__PURE__ */React5.createElement(Portal, {\n    mount: clerk.mountSignUp,\n    unmount: clerk.unmountSignUp,\n    updateProps: clerk.__unstable__updateProps,\n    props\n  });\n}, \"SignUp\");\n\nfunction UserProfilePage(_ref4) {\n  let {\n    children\n  } = _ref4;\n  logErrorInDevMode2(userProfilePageRenderedError);\n  return /* @__PURE__ */React5.createElement(React5.Fragment, null, children);\n}\n\nfunction UserProfileLink(_ref5) {\n  let {\n    children\n  } = _ref5;\n  logErrorInDevMode2(userProfileLinkRenderedError);\n  return /* @__PURE__ */React5.createElement(React5.Fragment, null, children);\n}\n\nvar _UserProfile = withClerk(_ref6 => {\n  let {\n    clerk,\n    ...props\n  } = _ref6;\n  const {\n    customPages,\n    customPagesPortals\n  } = useUserProfileCustomPages(props.children);\n  return /* @__PURE__ */React5.createElement(Portal, {\n    mount: clerk.mountUserProfile,\n    unmount: clerk.unmountUserProfile,\n    updateProps: clerk.__unstable__updateProps,\n    props: { ...props,\n      customPages\n    },\n    customPagesPortals\n  });\n}, \"UserProfile\");\n\nvar UserProfile = Object.assign(_UserProfile, {\n  Page: UserProfilePage,\n  Link: UserProfileLink\n});\n\nvar _UserButton = withClerk(_ref7 => {\n  let {\n    clerk,\n    ...props\n  } = _ref7;\n  const {\n    customPages,\n    customPagesPortals\n  } = useUserProfileCustomPages(props.children);\n  const userProfileProps = Object.assign(props.userProfileProps || {}, {\n    customPages\n  });\n  return /* @__PURE__ */React5.createElement(Portal, {\n    mount: clerk.mountUserButton,\n    unmount: clerk.unmountUserButton,\n    updateProps: clerk.__unstable__updateProps,\n    props: { ...props,\n      userProfileProps\n    },\n    customPagesPortals\n  });\n}, \"UserButton\");\n\nvar UserButton = Object.assign(_UserButton, {\n  UserProfilePage,\n  UserProfileLink\n});\n\nfunction OrganizationProfilePage(_ref8) {\n  let {\n    children\n  } = _ref8;\n  logErrorInDevMode2(organizationProfilePageRenderedError);\n  return /* @__PURE__ */React5.createElement(React5.Fragment, null, children);\n}\n\nfunction OrganizationProfileLink(_ref9) {\n  let {\n    children\n  } = _ref9;\n  logErrorInDevMode2(organizationProfileLinkRenderedError);\n  return /* @__PURE__ */React5.createElement(React5.Fragment, null, children);\n}\n\nvar _OrganizationProfile = withClerk(_ref10 => {\n  let {\n    clerk,\n    ...props\n  } = _ref10;\n  const {\n    customPages,\n    customPagesPortals\n  } = useOrganizationProfileCustomPages(props.children);\n  return /* @__PURE__ */React5.createElement(Portal, {\n    mount: clerk.mountOrganizationProfile,\n    unmount: clerk.unmountOrganizationProfile,\n    updateProps: clerk.__unstable__updateProps,\n    props: { ...props,\n      customPages\n    },\n    customPagesPortals\n  });\n}, \"OrganizationProfile\");\n\nvar OrganizationProfile = Object.assign(_OrganizationProfile, {\n  Page: OrganizationProfilePage,\n  Link: OrganizationProfileLink\n});\nvar CreateOrganization = withClerk(_ref11 => {\n  let {\n    clerk,\n    ...props\n  } = _ref11;\n  return /* @__PURE__ */React5.createElement(Portal, {\n    mount: clerk.mountCreateOrganization,\n    unmount: clerk.unmountCreateOrganization,\n    updateProps: clerk.__unstable__updateProps,\n    props\n  });\n}, \"CreateOrganization\");\n\nvar _OrganizationSwitcher = withClerk(_ref12 => {\n  let {\n    clerk,\n    ...props\n  } = _ref12;\n  const {\n    customPages,\n    customPagesPortals\n  } = useOrganizationProfileCustomPages(props.children);\n  const organizationProfileProps = Object.assign(props.organizationProfileProps || {}, {\n    customPages\n  });\n  return /* @__PURE__ */React5.createElement(Portal, {\n    mount: clerk.mountOrganizationSwitcher,\n    unmount: clerk.unmountOrganizationSwitcher,\n    updateProps: clerk.__unstable__updateProps,\n    props: { ...props,\n      organizationProfileProps\n    },\n    customPagesPortals\n  });\n}, \"OrganizationSwitcher\");\n\nvar OrganizationSwitcher = Object.assign(_OrganizationSwitcher, {\n  OrganizationProfilePage,\n  OrganizationProfileLink\n});\nvar OrganizationList = withClerk(_ref13 => {\n  let {\n    clerk,\n    ...props\n  } = _ref13;\n  return /* @__PURE__ */React5.createElement(Portal, {\n    mount: clerk.mountOrganizationList,\n    unmount: clerk.unmountOrganizationList,\n    updateProps: clerk.__unstable__updateProps,\n    props\n  });\n}, \"OrganizationList\");\nvar GoogleOneTap = withClerk(_ref14 => {\n  let {\n    clerk,\n    ...props\n  } = _ref14;\n  return /* @__PURE__ */React5.createElement(Portal, {\n    open: clerk.openGoogleOneTap,\n    close: clerk.closeGoogleOneTap,\n    props\n  });\n}, \"GoogleOneTap\"); // src/components/SignInButton.tsx\n\nimport React6 from \"react\";\nvar SignInButton = withClerk(_ref15 => {\n  let {\n    clerk,\n    children,\n    ...props\n  } = _ref15;\n  const {\n    signUpFallbackRedirectUrl,\n    forceRedirectUrl,\n    fallbackRedirectUrl,\n    signUpForceRedirectUrl,\n    mode,\n    ...rest\n  } = props;\n  children = normalizeWithDefaultValue(children, \"Sign in\");\n  const child = assertSingleChild(children)(\"SignInButton\");\n\n  const clickHandler = () => {\n    const opts = {\n      forceRedirectUrl,\n      fallbackRedirectUrl,\n      signUpFallbackRedirectUrl,\n      signUpForceRedirectUrl\n    };\n\n    if (mode === \"modal\") {\n      return clerk.openSignIn(opts);\n    }\n\n    return clerk.redirectToSignIn({ ...opts,\n      signInFallbackRedirectUrl: fallbackRedirectUrl,\n      signInForceRedirectUrl: forceRedirectUrl\n    });\n  };\n\n  const wrappedChildClickHandler = async e => {\n    if (child && typeof child === \"object\" && \"props\" in child) {\n      await safeExecute(child.props.onClick)(e);\n    }\n\n    return clickHandler();\n  };\n\n  const childProps = { ...rest,\n    onClick: wrappedChildClickHandler\n  };\n  return React6.cloneElement(child, childProps);\n}, \"SignInButton\"); // src/components/SignUpButton.tsx\n\nimport React7 from \"react\";\nvar SignUpButton = withClerk(_ref16 => {\n  let {\n    clerk,\n    children,\n    ...props\n  } = _ref16;\n  const {\n    fallbackRedirectUrl,\n    forceRedirectUrl,\n    signInFallbackRedirectUrl,\n    signInForceRedirectUrl,\n    mode,\n    unsafeMetadata,\n    ...rest\n  } = props;\n  children = normalizeWithDefaultValue(children, \"Sign up\");\n  const child = assertSingleChild(children)(\"SignUpButton\");\n\n  const clickHandler = () => {\n    const opts = {\n      fallbackRedirectUrl,\n      forceRedirectUrl,\n      signInFallbackRedirectUrl,\n      signInForceRedirectUrl,\n      unsafeMetadata\n    };\n\n    if (mode === \"modal\") {\n      return clerk.openSignUp(opts);\n    }\n\n    return clerk.redirectToSignUp({ ...opts,\n      signUpFallbackRedirectUrl: fallbackRedirectUrl,\n      signUpForceRedirectUrl: forceRedirectUrl\n    });\n  };\n\n  const wrappedChildClickHandler = async e => {\n    if (child && typeof child === \"object\" && \"props\" in child) {\n      await safeExecute(child.props.onClick)(e);\n    }\n\n    return clickHandler();\n  };\n\n  const childProps = { ...rest,\n    onClick: wrappedChildClickHandler\n  };\n  return React7.cloneElement(child, childProps);\n}, \"SignUpButton\"); // src/components/SignOutButton.tsx\n\nimport React8 from \"react\";\nvar SignOutButton = withClerk(_ref17 => {\n  let {\n    clerk,\n    children,\n    ...props\n  } = _ref17;\n  const {\n    redirectUrl = \"/\",\n    signOutOptions,\n    ...rest\n  } = props;\n  children = normalizeWithDefaultValue(children, \"Sign out\");\n  const child = assertSingleChild(children)(\"SignOutButton\");\n\n  const clickHandler = () => clerk.signOut({\n    redirectUrl\n  });\n\n  const wrappedChildClickHandler = async e => {\n    await safeExecute(child.props.onClick)(e);\n    return clickHandler();\n  };\n\n  const childProps = { ...rest,\n    onClick: wrappedChildClickHandler\n  };\n  return React8.cloneElement(child, childProps);\n}, \"SignOutButton\"); // src/components/SignInWithMetamaskButton.tsx\n\nimport React9 from \"react\";\nvar SignInWithMetamaskButton = withClerk(_ref18 => {\n  let {\n    clerk,\n    children,\n    ...props\n  } = _ref18;\n  const {\n    redirectUrl,\n    ...rest\n  } = props;\n  children = normalizeWithDefaultValue(children, \"Sign in with Metamask\");\n  const child = assertSingleChild(children)(\"SignInWithMetamaskButton\");\n\n  const clickHandler = async () => {\n    async function authenticate() {\n      await clerk.authenticateWithMetamask({\n        redirectUrl: redirectUrl || void 0\n      });\n    }\n\n    void authenticate();\n  };\n\n  const wrappedChildClickHandler = async e => {\n    await safeExecute(child.props.onClick)(e);\n    return clickHandler();\n  };\n\n  const childProps = { ...rest,\n    onClick: wrappedChildClickHandler\n  };\n  return React9.cloneElement(child, childProps);\n}, \"SignInWithMetamask\"); // src/contexts/ClerkProvider.tsx\n\nimport { isPublishableKey } from \"@clerk/shared/keys\";\nimport React11 from \"react\"; // src/contexts/ClerkContextProvider.tsx\n\nimport { ClientContext, OrganizationProvider, SessionContext, UserContext } from \"@clerk/shared/react\";\nimport React10 from \"react\"; // src/isomorphicClerk.ts\n\nimport { inBrowser } from \"@clerk/shared/browser\";\nimport { handleValueOrFn } from \"@clerk/shared/handleValueOrFn\";\nvar SDK_METADATA = {\n  name: \"@clerk/clerk-react\",\n  version: \"5.2.3\",\n  environment: process.env.NODE_ENV\n};\n\nvar _loaded, _domain, _proxyUrl, _publishableKey, _instance, _waitForClerkJS, waitForClerkJS_fn;\n\nvar _IsomorphicClerk = class _IsomorphicClerk {\n  constructor(options) {\n    var _this = this;\n\n    __privateAdd(this, _waitForClerkJS);\n\n    this.clerkjs = null;\n    this.preopenOneTap = null;\n    this.preopenSignIn = null;\n    this.preopenSignUp = null;\n    this.preopenUserProfile = null;\n    this.preopenOrganizationProfile = null;\n    this.preopenCreateOrganization = null;\n    this.premountSignInNodes = /* @__PURE__ */new Map();\n    this.premountSignUpNodes = /* @__PURE__ */new Map();\n    this.premountUserProfileNodes = /* @__PURE__ */new Map();\n    this.premountUserButtonNodes = /* @__PURE__ */new Map();\n    this.premountOrganizationProfileNodes = /* @__PURE__ */new Map();\n    this.premountCreateOrganizationNodes = /* @__PURE__ */new Map();\n    this.premountOrganizationSwitcherNodes = /* @__PURE__ */new Map();\n    this.premountOrganizationListNodes = /* @__PURE__ */new Map();\n    this.premountMethodCalls = /* @__PURE__ */new Map();\n    this.loadedListeners = [];\n\n    __privateAdd(this, _loaded, false);\n\n    __privateAdd(this, _domain, void 0);\n\n    __privateAdd(this, _proxyUrl, void 0);\n\n    __privateAdd(this, _publishableKey, void 0);\n\n    this.buildSignInUrl = opts => {\n      const callback = () => {\n        var _a;\n\n        return ((_a = this.clerkjs) == null ? void 0 : _a.buildSignInUrl(opts)) || \"\";\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"buildSignInUrl\", callback);\n      }\n    };\n\n    this.buildSignUpUrl = opts => {\n      const callback = () => {\n        var _a;\n\n        return ((_a = this.clerkjs) == null ? void 0 : _a.buildSignUpUrl(opts)) || \"\";\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"buildSignUpUrl\", callback);\n      }\n    };\n\n    this.buildAfterSignInUrl = () => {\n      const callback = () => {\n        var _a;\n\n        return ((_a = this.clerkjs) == null ? void 0 : _a.buildAfterSignInUrl()) || \"\";\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"buildAfterSignInUrl\", callback);\n      }\n    };\n\n    this.buildAfterSignUpUrl = () => {\n      const callback = () => {\n        var _a;\n\n        return ((_a = this.clerkjs) == null ? void 0 : _a.buildAfterSignUpUrl()) || \"\";\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"buildAfterSignUpUrl\", callback);\n      }\n    };\n\n    this.buildAfterSignOutUrl = () => {\n      const callback = () => {\n        var _a;\n\n        return ((_a = this.clerkjs) == null ? void 0 : _a.buildAfterSignOutUrl()) || \"\";\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"buildAfterSignOutUrl\", callback);\n      }\n    };\n\n    this.buildUserProfileUrl = () => {\n      const callback = () => {\n        var _a;\n\n        return ((_a = this.clerkjs) == null ? void 0 : _a.buildUserProfileUrl()) || \"\";\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"buildUserProfileUrl\", callback);\n      }\n    };\n\n    this.buildCreateOrganizationUrl = () => {\n      const callback = () => {\n        var _a;\n\n        return ((_a = this.clerkjs) == null ? void 0 : _a.buildCreateOrganizationUrl()) || \"\";\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"buildCreateOrganizationUrl\", callback);\n      }\n    };\n\n    this.buildOrganizationProfileUrl = () => {\n      const callback = () => {\n        var _a;\n\n        return ((_a = this.clerkjs) == null ? void 0 : _a.buildOrganizationProfileUrl()) || \"\";\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"buildOrganizationProfileUrl\", callback);\n      }\n    };\n\n    this.buildUrlWithAuth = to => {\n      const callback = () => {\n        var _a;\n\n        return ((_a = this.clerkjs) == null ? void 0 : _a.buildUrlWithAuth(to)) || \"\";\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"buildUrlWithAuth\", callback);\n      }\n    };\n\n    this.handleUnauthenticated = () => {\n      const callback = () => {\n        var _a;\n\n        return (_a = this.clerkjs) == null ? void 0 : _a.handleUnauthenticated();\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        void callback();\n      } else {\n        this.premountMethodCalls.set(\"handleUnauthenticated\", callback);\n      }\n    };\n\n    this.addOnLoaded = cb => {\n      this.loadedListeners.push(cb);\n\n      if (this.loaded) {\n        this.emitLoaded();\n      }\n    };\n\n    this.emitLoaded = () => {\n      this.loadedListeners.forEach(cb => cb());\n      this.loadedListeners = [];\n    };\n\n    this.hydrateClerkJS = clerkjs => {\n      if (!clerkjs) {\n        throw new Error(\"Failed to hydrate latest Clerk JS\");\n      }\n\n      this.clerkjs = clerkjs;\n      this.premountMethodCalls.forEach(cb => cb());\n\n      if (this.preopenSignIn !== null) {\n        clerkjs.openSignIn(this.preopenSignIn);\n      }\n\n      if (this.preopenSignUp !== null) {\n        clerkjs.openSignUp(this.preopenSignUp);\n      }\n\n      if (this.preopenUserProfile !== null) {\n        clerkjs.openUserProfile(this.preopenUserProfile);\n      }\n\n      if (this.preopenOneTap !== null) {\n        clerkjs.openGoogleOneTap(this.preopenOneTap);\n      }\n\n      if (this.preopenOrganizationProfile !== null) {\n        clerkjs.openOrganizationProfile(this.preopenOrganizationProfile);\n      }\n\n      if (this.preopenCreateOrganization !== null) {\n        clerkjs.openCreateOrganization(this.preopenCreateOrganization);\n      }\n\n      this.premountSignInNodes.forEach((props, node) => {\n        clerkjs.mountSignIn(node, props);\n      });\n      this.premountSignUpNodes.forEach((props, node) => {\n        clerkjs.mountSignUp(node, props);\n      });\n      this.premountUserProfileNodes.forEach((props, node) => {\n        clerkjs.mountUserProfile(node, props);\n      });\n      this.premountUserButtonNodes.forEach((props, node) => {\n        clerkjs.mountUserButton(node, props);\n      });\n      this.premountOrganizationListNodes.forEach((props, node) => {\n        clerkjs.mountOrganizationList(node, props);\n      });\n\n      __privateSet(this, _loaded, true);\n\n      this.emitLoaded();\n      return this.clerkjs;\n    };\n\n    this.__unstable__updateProps = props => {\n      if (this.clerkjs && \"__unstable__updateProps\" in this.clerkjs) {\n        this.clerkjs.__unstable__updateProps(props);\n      } else {\n        return void 0;\n      }\n    };\n    /**\n     * `setActive` can be used to set the active session and/or organization.\n     */\n\n\n    this.setActive = _ref19 => {\n      let {\n        session,\n        organization,\n        beforeEmit\n      } = _ref19;\n\n      if (this.clerkjs) {\n        return this.clerkjs.setActive({\n          session,\n          organization,\n          beforeEmit\n        });\n      } else {\n        return Promise.reject();\n      }\n    };\n\n    this.openSignIn = props => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.openSignIn(props);\n      } else {\n        this.preopenSignIn = props;\n      }\n    };\n\n    this.closeSignIn = () => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.closeSignIn();\n      } else {\n        this.preopenSignIn = null;\n      }\n    };\n\n    this.openGoogleOneTap = props => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.openGoogleOneTap(props);\n      } else {\n        this.preopenOneTap = props;\n      }\n    };\n\n    this.closeGoogleOneTap = () => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.closeGoogleOneTap();\n      } else {\n        this.preopenOneTap = null;\n      }\n    };\n\n    this.openUserProfile = props => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.openUserProfile(props);\n      } else {\n        this.preopenUserProfile = props;\n      }\n    };\n\n    this.closeUserProfile = () => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.closeUserProfile();\n      } else {\n        this.preopenUserProfile = null;\n      }\n    };\n\n    this.openOrganizationProfile = props => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.openOrganizationProfile(props);\n      } else {\n        this.preopenOrganizationProfile = props;\n      }\n    };\n\n    this.closeOrganizationProfile = () => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.closeOrganizationProfile();\n      } else {\n        this.preopenOrganizationProfile = null;\n      }\n    };\n\n    this.openCreateOrganization = props => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.openCreateOrganization(props);\n      } else {\n        this.preopenCreateOrganization = props;\n      }\n    };\n\n    this.closeCreateOrganization = () => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.closeCreateOrganization();\n      } else {\n        this.preopenCreateOrganization = null;\n      }\n    };\n\n    this.openSignUp = props => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.openSignUp(props);\n      } else {\n        this.preopenSignUp = props;\n      }\n    };\n\n    this.closeSignUp = () => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.closeSignUp();\n      } else {\n        this.preopenSignUp = null;\n      }\n    };\n\n    this.mountSignIn = (node, props) => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.mountSignIn(node, props);\n      } else {\n        this.premountSignInNodes.set(node, props);\n      }\n    };\n\n    this.unmountSignIn = node => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.unmountSignIn(node);\n      } else {\n        this.premountSignInNodes.delete(node);\n      }\n    };\n\n    this.mountSignUp = (node, props) => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.mountSignUp(node, props);\n      } else {\n        this.premountSignUpNodes.set(node, props);\n      }\n    };\n\n    this.unmountSignUp = node => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.unmountSignUp(node);\n      } else {\n        this.premountSignUpNodes.delete(node);\n      }\n    };\n\n    this.mountUserProfile = (node, props) => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.mountUserProfile(node, props);\n      } else {\n        this.premountUserProfileNodes.set(node, props);\n      }\n    };\n\n    this.unmountUserProfile = node => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.unmountUserProfile(node);\n      } else {\n        this.premountUserProfileNodes.delete(node);\n      }\n    };\n\n    this.mountOrganizationProfile = (node, props) => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.mountOrganizationProfile(node, props);\n      } else {\n        this.premountOrganizationProfileNodes.set(node, props);\n      }\n    };\n\n    this.unmountOrganizationProfile = node => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.unmountOrganizationProfile(node);\n      } else {\n        this.premountOrganizationProfileNodes.delete(node);\n      }\n    };\n\n    this.mountCreateOrganization = (node, props) => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.mountCreateOrganization(node, props);\n      } else {\n        this.premountCreateOrganizationNodes.set(node, props);\n      }\n    };\n\n    this.unmountCreateOrganization = node => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.unmountCreateOrganization(node);\n      } else {\n        this.premountCreateOrganizationNodes.delete(node);\n      }\n    };\n\n    this.mountOrganizationSwitcher = (node, props) => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.mountOrganizationSwitcher(node, props);\n      } else {\n        this.premountOrganizationSwitcherNodes.set(node, props);\n      }\n    };\n\n    this.unmountOrganizationSwitcher = node => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.unmountOrganizationSwitcher(node);\n      } else {\n        this.premountOrganizationSwitcherNodes.delete(node);\n      }\n    };\n\n    this.mountOrganizationList = (node, props) => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.mountOrganizationList(node, props);\n      } else {\n        this.premountOrganizationListNodes.set(node, props);\n      }\n    };\n\n    this.unmountOrganizationList = node => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.unmountOrganizationList(node);\n      } else {\n        this.premountOrganizationListNodes.delete(node);\n      }\n    };\n\n    this.mountUserButton = (node, userButtonProps) => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.mountUserButton(node, userButtonProps);\n      } else {\n        this.premountUserButtonNodes.set(node, userButtonProps);\n      }\n    };\n\n    this.unmountUserButton = node => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.unmountUserButton(node);\n      } else {\n        this.premountUserButtonNodes.delete(node);\n      }\n    };\n\n    this.addListener = listener => {\n      const callback = () => {\n        var _a;\n\n        return (_a = this.clerkjs) == null ? void 0 : _a.addListener(listener);\n      };\n\n      if (this.clerkjs) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"addListener\", callback);\n        return () => this.premountMethodCalls.delete(\"addListener\");\n      }\n    };\n\n    this.navigate = to => {\n      const callback = () => {\n        var _a;\n\n        return (_a = this.clerkjs) == null ? void 0 : _a.navigate(to);\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        void callback();\n      } else {\n        this.premountMethodCalls.set(\"navigate\", callback);\n      }\n    };\n\n    this.redirectWithAuth = async function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      const callback = () => {\n        var _a;\n\n        return (_a = _this.clerkjs) == null ? void 0 : _a.redirectWithAuth(...args);\n      };\n\n      if (_this.clerkjs && __privateGet(_this, _loaded)) {\n        return callback();\n      } else {\n        _this.premountMethodCalls.set(\"redirectWithAuth\", callback);\n\n        return;\n      }\n    };\n\n    this.redirectToSignIn = async opts => {\n      const callback = () => {\n        var _a;\n\n        return (_a = this.clerkjs) == null ? void 0 : _a.redirectToSignIn(opts);\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"redirectToSignIn\", callback);\n        return;\n      }\n    };\n\n    this.redirectToSignUp = async opts => {\n      const callback = () => {\n        var _a;\n\n        return (_a = this.clerkjs) == null ? void 0 : _a.redirectToSignUp(opts);\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"redirectToSignUp\", callback);\n        return;\n      }\n    };\n\n    this.redirectToUserProfile = async () => {\n      const callback = () => {\n        var _a;\n\n        return (_a = this.clerkjs) == null ? void 0 : _a.redirectToUserProfile();\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"redirectToUserProfile\", callback);\n        return;\n      }\n    };\n\n    this.redirectToAfterSignUp = () => {\n      const callback = () => {\n        var _a;\n\n        return (_a = this.clerkjs) == null ? void 0 : _a.redirectToAfterSignUp();\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"redirectToAfterSignUp\", callback);\n      }\n    };\n\n    this.redirectToAfterSignIn = () => {\n      const callback = () => {\n        var _a;\n\n        return (_a = this.clerkjs) == null ? void 0 : _a.redirectToAfterSignIn();\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        callback();\n      } else {\n        this.premountMethodCalls.set(\"redirectToAfterSignIn\", callback);\n      }\n    };\n\n    this.redirectToAfterSignOut = () => {\n      const callback = () => {\n        var _a;\n\n        return (_a = this.clerkjs) == null ? void 0 : _a.redirectToAfterSignOut();\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        callback();\n      } else {\n        this.premountMethodCalls.set(\"redirectToAfterSignOut\", callback);\n      }\n    };\n\n    this.redirectToOrganizationProfile = async () => {\n      const callback = () => {\n        var _a;\n\n        return (_a = this.clerkjs) == null ? void 0 : _a.redirectToOrganizationProfile();\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"redirectToOrganizationProfile\", callback);\n        return;\n      }\n    };\n\n    this.redirectToCreateOrganization = async () => {\n      const callback = () => {\n        var _a;\n\n        return (_a = this.clerkjs) == null ? void 0 : _a.redirectToCreateOrganization();\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"redirectToCreateOrganization\", callback);\n        return;\n      }\n    };\n\n    this.handleRedirectCallback = params => {\n      var _a;\n\n      const callback = () => {\n        var _a2;\n\n        return (_a2 = this.clerkjs) == null ? void 0 : _a2.handleRedirectCallback(params);\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        void ((_a = callback()) == null ? void 0 : _a.catch(() => {}));\n      } else {\n        this.premountMethodCalls.set(\"handleRedirectCallback\", callback);\n      }\n    };\n\n    this.handleGoogleOneTapCallback = (signInOrUp, params) => {\n      var _a;\n\n      const callback = () => {\n        var _a2;\n\n        return (_a2 = this.clerkjs) == null ? void 0 : _a2.handleGoogleOneTapCallback(signInOrUp, params);\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        void ((_a = callback()) == null ? void 0 : _a.catch(() => {}));\n      } else {\n        this.premountMethodCalls.set(\"handleGoogleOneTapCallback\", callback);\n      }\n    };\n\n    this.handleEmailLinkVerification = async params => {\n      const callback = () => {\n        var _a;\n\n        return (_a = this.clerkjs) == null ? void 0 : _a.handleEmailLinkVerification(params);\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"handleEmailLinkVerification\", callback);\n      }\n    };\n\n    this.authenticateWithMetamask = async params => {\n      const callback = () => {\n        var _a;\n\n        return (_a = this.clerkjs) == null ? void 0 : _a.authenticateWithMetamask(params);\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"authenticateWithMetamask\", callback);\n      }\n    };\n\n    this.authenticateWithGoogleOneTap = async params => {\n      const clerkjs = await __privateMethod(this, _waitForClerkJS, waitForClerkJS_fn).call(this);\n      return clerkjs.authenticateWithGoogleOneTap(params);\n    };\n\n    this.createOrganization = async params => {\n      const callback = () => {\n        var _a;\n\n        return (_a = this.clerkjs) == null ? void 0 : _a.createOrganization(params);\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"createOrganization\", callback);\n      }\n    };\n\n    this.getOrganization = async organizationId => {\n      const callback = () => {\n        var _a;\n\n        return (_a = this.clerkjs) == null ? void 0 : _a.getOrganization(organizationId);\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"getOrganization\", callback);\n      }\n    };\n\n    this.signOut = async (signOutCallbackOrOptions, options) => {\n      const callback = () => {\n        var _a;\n\n        return (_a = this.clerkjs) == null ? void 0 : _a.signOut(signOutCallbackOrOptions, options);\n      };\n\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"signOut\", callback);\n      }\n    };\n\n    const {\n      Clerk = null,\n      publishableKey\n    } = options || {};\n\n    __privateSet(this, _publishableKey, publishableKey);\n\n    __privateSet(this, _proxyUrl, options == null ? void 0 : options.proxyUrl);\n\n    __privateSet(this, _domain, options == null ? void 0 : options.domain);\n\n    this.options = options;\n    this.Clerk = Clerk;\n    this.mode = inBrowser() ? \"browser\" : \"server\";\n\n    if (!this.options.sdkMetadata) {\n      this.options.sdkMetadata = SDK_METADATA;\n    }\n\n    void this.loadClerkJS();\n  }\n\n  get publishableKey() {\n    return __privateGet(this, _publishableKey);\n  }\n\n  get loaded() {\n    return __privateGet(this, _loaded);\n  }\n\n  static getOrCreateInstance(options) {\n    if (!inBrowser() || !__privateGet(this, _instance) || options.Clerk && __privateGet(this, _instance).Clerk !== options.Clerk) {\n      __privateSet(this, _instance, new _IsomorphicClerk(options));\n    }\n\n    return __privateGet(this, _instance);\n  }\n\n  static clearInstance() {\n    __privateSet(this, _instance, null);\n  }\n\n  get domain() {\n    if (typeof window !== \"undefined\" && window.location) {\n      return handleValueOrFn(__privateGet(this, _domain), new URL(window.location.href), \"\");\n    }\n\n    if (typeof __privateGet(this, _domain) === \"function\") {\n      return errorThrower.throw(unsupportedNonBrowserDomainOrProxyUrlFunction);\n    }\n\n    return __privateGet(this, _domain) || \"\";\n  }\n\n  get proxyUrl() {\n    if (typeof window !== \"undefined\" && window.location) {\n      return handleValueOrFn(__privateGet(this, _proxyUrl), new URL(window.location.href), \"\");\n    }\n\n    if (typeof __privateGet(this, _proxyUrl) === \"function\") {\n      return errorThrower.throw(unsupportedNonBrowserDomainOrProxyUrlFunction);\n    }\n\n    return __privateGet(this, _proxyUrl) || \"\";\n  }\n\n  get sdkMetadata() {\n    var _a;\n\n    return ((_a = this.clerkjs) == null ? void 0 : _a.sdkMetadata) || this.options.sdkMetadata || void 0;\n  }\n\n  get instanceType() {\n    var _a;\n\n    return (_a = this.clerkjs) == null ? void 0 : _a.instanceType;\n  }\n\n  get frontendApi() {\n    var _a;\n\n    return ((_a = this.clerkjs) == null ? void 0 : _a.frontendApi) || \"\";\n  }\n\n  get isStandardBrowser() {\n    var _a;\n\n    return ((_a = this.clerkjs) == null ? void 0 : _a.isStandardBrowser) || this.options.standardBrowser || false;\n  }\n\n  get isSatellite() {\n    if (typeof window !== \"undefined\" && window.location) {\n      return handleValueOrFn(this.options.isSatellite, new URL(window.location.href), false);\n    }\n\n    if (typeof this.options.isSatellite === \"function\") {\n      return errorThrower.throw(unsupportedNonBrowserDomainOrProxyUrlFunction);\n    }\n\n    return false;\n  }\n\n  async loadClerkJS() {\n    var _a;\n\n    if (this.mode !== \"browser\" || __privateGet(this, _loaded)) {\n      return;\n    }\n\n    if (typeof window !== \"undefined\") {\n      window.__clerk_publishable_key = __privateGet(this, _publishableKey);\n      window.__clerk_proxy_url = this.proxyUrl;\n      window.__clerk_domain = this.domain;\n    }\n\n    try {\n      if (this.Clerk) {\n        let c;\n\n        if (isConstructor(this.Clerk)) {\n          c = new this.Clerk(__privateGet(this, _publishableKey), {\n            proxyUrl: this.proxyUrl,\n            domain: this.domain\n          });\n          await c.load(this.options);\n        } else {\n          c = this.Clerk;\n\n          if (!c.loaded) {\n            await c.load(this.options);\n          }\n        }\n\n        global.Clerk = c;\n      } else {\n        if (!global.Clerk) {\n          await loadClerkJsScript({ ...this.options,\n            publishableKey: __privateGet(this, _publishableKey),\n            proxyUrl: this.proxyUrl,\n            domain: this.domain\n          });\n        }\n\n        if (!global.Clerk) {\n          throw new Error(\"Failed to download latest ClerkJS. Contact support@clerk.com.\");\n        }\n\n        await global.Clerk.load(this.options);\n      }\n\n      if ((_a = global.Clerk) == null ? void 0 : _a.loaded) {\n        return this.hydrateClerkJS(global.Clerk);\n      }\n\n      return;\n    } catch (err) {\n      const error = err;\n\n      if (process.env.NODE_ENV === \"production\") {\n        console.error(error.stack || error.message || error);\n      } else {\n        throw err;\n      }\n\n      return;\n    }\n  }\n\n  get version() {\n    var _a;\n\n    return (_a = this.clerkjs) == null ? void 0 : _a.version;\n  }\n\n  get client() {\n    if (this.clerkjs) {\n      return this.clerkjs.client;\n    } else {\n      return void 0;\n    }\n  }\n\n  get session() {\n    if (this.clerkjs) {\n      return this.clerkjs.session;\n    } else {\n      return void 0;\n    }\n  }\n\n  get user() {\n    if (this.clerkjs) {\n      return this.clerkjs.user;\n    } else {\n      return void 0;\n    }\n  }\n\n  get organization() {\n    if (this.clerkjs) {\n      return this.clerkjs.organization;\n    } else {\n      return void 0;\n    }\n  }\n\n  get telemetry() {\n    if (this.clerkjs) {\n      return this.clerkjs.telemetry;\n    } else {\n      return void 0;\n    }\n  }\n\n  get __unstable__environment() {\n    if (this.clerkjs) {\n      return this.clerkjs.__unstable__environment;\n    } else {\n      return void 0;\n    }\n  }\n\n  __unstable__setEnvironment() {\n    if (this.clerkjs && \"__unstable__setEnvironment\" in this.clerkjs) {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      this.clerkjs.__unstable__setEnvironment(args);\n    } else {\n      return void 0;\n    }\n  }\n\n};\n\n_loaded = new WeakMap();\n_domain = new WeakMap();\n_proxyUrl = new WeakMap();\n_publishableKey = new WeakMap();\n_instance = new WeakMap();\n_waitForClerkJS = new WeakSet();\n\nwaitForClerkJS_fn = function () {\n  return new Promise(resolve => {\n    if (__privateGet(this, _loaded)) {\n      resolve(this.clerkjs);\n    }\n\n    this.addOnLoaded(() => resolve(this.clerkjs));\n  });\n};\n\n__privateAdd(_IsomorphicClerk, _instance, void 0);\n\nvar IsomorphicClerk = _IsomorphicClerk; // src/utils/deriveState.ts\n\nvar deriveState = (clerkLoaded, state, initialState) => {\n  if (!clerkLoaded && initialState) {\n    return deriveFromSsrInitialState(initialState);\n  }\n\n  return deriveFromClientSideState(state);\n};\n\nvar deriveFromSsrInitialState = initialState => {\n  const userId = initialState.userId;\n  const user = initialState.user;\n  const sessionId = initialState.sessionId;\n  const session = initialState.session;\n  const organization = initialState.organization;\n  const orgId = initialState.orgId;\n  const orgRole = initialState.orgRole;\n  const orgPermissions = initialState.orgPermissions;\n  const orgSlug = initialState.orgSlug;\n  const actor = initialState.actor;\n  return {\n    userId,\n    user,\n    sessionId,\n    session,\n    organization,\n    orgId,\n    orgRole,\n    orgPermissions,\n    orgSlug,\n    actor\n  };\n};\n\nvar deriveFromClientSideState = state => {\n  var _a;\n\n  const userId = state.user ? state.user.id : state.user;\n  const user = state.user;\n  const sessionId = state.session ? state.session.id : state.session;\n  const session = state.session;\n  const actor = session == null ? void 0 : session.actor;\n  const organization = state.organization;\n  const orgId = state.organization ? state.organization.id : state.organization;\n  const orgSlug = organization == null ? void 0 : organization.slug;\n  const membership = organization ? (_a = user == null ? void 0 : user.organizationMemberships) == null ? void 0 : _a.find(om => om.organization.id === orgId) : organization;\n  const orgPermissions = membership ? membership.permissions : membership;\n  const orgRole = membership ? membership.role : membership;\n  return {\n    userId,\n    user,\n    sessionId,\n    session,\n    organization,\n    orgId,\n    orgRole,\n    orgSlug,\n    orgPermissions,\n    actor\n  };\n}; // src/contexts/ClerkContextProvider.tsx\n\n\nfunction ClerkContextProvider(props) {\n  const {\n    isomorphicClerkOptions,\n    initialState,\n    children\n  } = props;\n  const {\n    isomorphicClerk: clerk,\n    loaded: clerkLoaded\n  } = useLoadedIsomorphicClerk(isomorphicClerkOptions);\n  const [state, setState] = React10.useState({\n    client: clerk.client,\n    session: clerk.session,\n    user: clerk.user,\n    organization: clerk.organization\n  });\n  React10.useEffect(() => {\n    return clerk.addListener(e => setState({ ...e\n    }));\n  }, []);\n  const derivedState = deriveState(clerkLoaded, state, initialState);\n  const clerkCtx = React10.useMemo(() => ({\n    value: clerk\n  }), [clerkLoaded]);\n  const clientCtx = React10.useMemo(() => ({\n    value: state.client\n  }), [state.client]);\n  const {\n    sessionId,\n    session,\n    userId,\n    user,\n    orgId,\n    actor,\n    organization,\n    orgRole,\n    orgSlug,\n    orgPermissions\n  } = derivedState;\n  const authCtx = React10.useMemo(() => {\n    const value = {\n      sessionId,\n      userId,\n      actor,\n      orgId,\n      orgRole,\n      orgSlug,\n      orgPermissions\n    };\n    return {\n      value\n    };\n  }, [sessionId, userId, actor, orgId, orgRole, orgSlug]);\n  const userCtx = React10.useMemo(() => ({\n    value: user\n  }), [userId, user]);\n  const sessionCtx = React10.useMemo(() => ({\n    value: session\n  }), [sessionId, session]);\n  const organizationCtx = React10.useMemo(() => {\n    const value = {\n      organization\n    };\n    return {\n      value\n    };\n  }, [orgId, organization]);\n  return (// @ts-expect-error value passed is of type IsomorphicClerk where the context expects LoadedClerk\n\n    /* @__PURE__ */\n    React10.createElement(IsomorphicClerkContext.Provider, {\n      value: clerkCtx\n    }, /* @__PURE__ */React10.createElement(ClientContext.Provider, {\n      value: clientCtx\n    }, /* @__PURE__ */React10.createElement(SessionContext.Provider, {\n      value: sessionCtx\n    }, /* @__PURE__ */React10.createElement(OrganizationProvider, { ...organizationCtx.value\n    }, /* @__PURE__ */React10.createElement(AuthContext.Provider, {\n      value: authCtx\n    }, /* @__PURE__ */React10.createElement(UserContext.Provider, {\n      value: userCtx\n    }, children))))))\n  );\n}\n\nvar useLoadedIsomorphicClerk = options => {\n  const [loaded, setLoaded] = React10.useState(false);\n  const isomorphicClerk = React10.useMemo(() => IsomorphicClerk.getOrCreateInstance(options), []);\n  React10.useEffect(() => {\n    isomorphicClerk.__unstable__updateProps({\n      appearance: options.appearance\n    });\n  }, [options.appearance]);\n  React10.useEffect(() => {\n    isomorphicClerk.__unstable__updateProps({\n      options\n    });\n  }, [options.localization]);\n  React10.useEffect(() => {\n    isomorphicClerk.addOnLoaded(() => setLoaded(true));\n  }, []);\n  React10.useEffect(() => {\n    return () => {\n      IsomorphicClerk.clearInstance();\n    };\n  }, []);\n  return {\n    isomorphicClerk,\n    loaded\n  };\n}; // src/contexts/ClerkProvider.tsx\n\n\nfunction ClerkProviderBase(props) {\n  const {\n    initialState,\n    children,\n    ...restIsomorphicClerkOptions\n  } = props;\n  const {\n    publishableKey = \"\",\n    Clerk: userInitialisedClerk\n  } = restIsomorphicClerkOptions;\n\n  if (!userInitialisedClerk) {\n    if (!publishableKey) {\n      errorThrower.throwMissingPublishableKeyError();\n    } else if (publishableKey && !isPublishableKey(publishableKey)) {\n      errorThrower.throwInvalidPublishableKeyError({\n        key: publishableKey\n      });\n    }\n  }\n\n  return /* @__PURE__ */React11.createElement(ClerkContextProvider, {\n    initialState,\n    isomorphicClerkOptions: restIsomorphicClerkOptions\n  }, children);\n}\n\nvar ClerkProvider = withMaxAllowedInstancesGuard(ClerkProviderBase, \"ClerkProvider\", multipleClerkProvidersError);\nClerkProvider.displayName = \"ClerkProvider\"; // src/index.ts\n\nsetErrorThrowerOptions({\n  packageName: \"@clerk/clerk-react\"\n});\nexport { AuthenticateWithRedirectCallback, ClerkLoaded, ClerkLoading, ClerkProvider, CreateOrganization, GoogleOneTap, OrganizationList, OrganizationProfile, OrganizationSwitcher, Protect, RedirectToCreateOrganization, RedirectToOrganizationProfile, RedirectToSignIn, RedirectToSignUp, RedirectToUserProfile, SignIn, SignInButton, SignInWithMetamaskButton, SignOutButton, SignUp, SignUpButton, SignedIn, SignedOut, UserButton, UserProfile, useAuth, useClerk, useEmailLink, useOrganization, useOrganizationList, useSession, useSessionList, useSignIn, useSignUp, useUser };","map":{"version":3,"mappings":"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","names":["window","global","logErrorInDevMode","without","isDeeplyEqual","React","createElement","assertSingleChild","children","name","Children","only","e","errorThrower","throw","multipleChildrenInButtonComponent","normalizeWithDefaultValue","defaultText","safeExecute","cb","isConstructor","f","counts","Map","useMaxAllowedInstancesGuard","error","maxCount","useEffect","count","get","set","withMaxAllowedInstancesGuard","WrappedComponent","displayName","Hoc","props","useState","createPortal","useCustomElementPortal","elements","initialState","Array","length","fill","nodes","setNodes","map","el","index","id","mount","node","prevState","n","i","unmount","portal","component","isThatComponent","v","isValidElement","type","useUserProfileCustomPages","reorderItemsLabels","useCustomPages","LinkComponent","UserProfileLink","PageComponent","UserProfilePage","componentName","useOrganizationProfileCustomPages","OrganizationProfileLink","OrganizationProfilePage","validChildren","forEach","child","customPagesIgnoredComponent","label","url","labelIcon","isReorderItem","push","isCustomPage","customPageWrongProps","isExternalLink","customLinkWrongProps","customPageContents","customPageLabelIcons","customLinkLabelIcons","cp","customPageContentsPortals","customPageLabelIconsPortals","customLinkLabelIconsPortals","customPages","customPagesPortals","contentPortal","find","p","labelPortal","mountIcon","unmountIcon","childProps","validItems","some","isMountProps","isOpenProps","Portal","PureComponent","constructor","portalRef","createRef","componentDidUpdate","_prevProps","prevProps","newProps","customPagesChanged","_a","_b","updateProps","current","componentDidMount","open","componentWillUnmount","close","render","ref","key","SignIn","withClerk","clerk","mountSignIn","unmountSignIn","__unstable__updateProps","SignUp","mountSignUp","unmountSignUp","userProfilePageRenderedError","userProfileLinkRenderedError","_UserProfile","mountUserProfile","unmountUserProfile","UserProfile","Object","assign","Page","Link","_UserButton","userProfileProps","mountUserButton","unmountUserButton","UserButton","organizationProfilePageRenderedError","organizationProfileLinkRenderedError","_OrganizationProfile","mountOrganizationProfile","unmountOrganizationProfile","OrganizationProfile","CreateOrganization","mountCreateOrganization","unmountCreateOrganization","_OrganizationSwitcher","organizationProfileProps","mountOrganizationSwitcher","unmountOrganizationSwitcher","OrganizationSwitcher","OrganizationList","mountOrganizationList","unmountOrganizationList","GoogleOneTap","openGoogleOneTap","closeGoogleOneTap","SignInButton","signUpFallbackRedirectUrl","forceRedirectUrl","fallbackRedirectUrl","signUpForceRedirectUrl","mode","rest","clickHandler","opts","openSignIn","redirectToSignIn","signInFallbackRedirectUrl","signInForceRedirectUrl","wrappedChildClickHandler","onClick","cloneElement","SignUpButton","unsafeMetadata","openSignUp","redirectToSignUp","SignOutButton","redirectUrl","signOutOptions","signOut","SignInWithMetamaskButton","authenticate","authenticateWithMetamask","isPublishableKey","ClientContext","OrganizationProvider","SessionContext","UserContext","inBrowser","handleValueOrFn","SDK_METADATA","version","environment","process","env","NODE_ENV","_IsomorphicClerk","options","__privateAdd","clerkjs","preopenOneTap","preopenSignIn","preopenSignUp","preopenUserProfile","preopenOrganizationProfile","preopenCreateOrganization","premountSignInNodes","premountSignUpNodes","premountUserProfileNodes","premountUserButtonNodes","premountOrganizationProfileNodes","premountCreateOrganizationNodes","premountOrganizationSwitcherNodes","premountOrganizationListNodes","premountMethodCalls","loadedListeners","callback","buildSignInUrl","__privateGet","_loaded","buildSignUpUrl","buildAfterSignInUrl","buildAfterSignUpUrl","buildAfterSignOutUrl","buildUserProfileUrl","buildCreateOrganizationUrl","buildOrganizationProfileUrl","to","buildUrlWithAuth","handleUnauthenticated","addOnLoaded","loaded","emitLoaded","hydrateClerkJS","Error","openUserProfile","openOrganizationProfile","openCreateOrganization","__privateSet","session","organization","beforeEmit","setActive","Promise","reject","closeSignIn","closeUserProfile","closeOrganizationProfile","closeCreateOrganization","closeSignUp","delete","userButtonProps","listener","addListener","navigate","args","redirectWithAuth","redirectToUserProfile","redirectToAfterSignUp","redirectToAfterSignIn","redirectToAfterSignOut","redirectToOrganizationProfile","redirectToCreateOrganization","params","handleRedirectCallback","catch","signInOrUp","handleGoogleOneTapCallback","handleEmailLinkVerification","__privateMethod","_waitForClerkJS","waitForClerkJS_fn","authenticateWithGoogleOneTap","createOrganization","organizationId","getOrganization","signOutCallbackOrOptions","Clerk","publishableKey","_publishableKey","_proxyUrl","proxyUrl","_domain","domain","sdkMetadata","loadClerkJS","_instance","location","URL","href","unsupportedNonBrowserDomainOrProxyUrlFunction","instanceType","frontendApi","isStandardBrowser","standardBrowser","isSatellite","__clerk_publishable_key","__clerk_proxy_url","__clerk_domain","c","load","loadClerkJsScript","err","console","stack","message","client","user","telemetry","__unstable__environment","__unstable__setEnvironment","resolve","IsomorphicClerk","deriveState","clerkLoaded","state","deriveFromSsrInitialState","deriveFromClientSideState","userId","sessionId","orgId","orgRole","orgPermissions","orgSlug","actor","slug","membership","organizationMemberships","om","permissions","role","ClerkContextProvider","isomorphicClerkOptions","isomorphicClerk","useLoadedIsomorphicClerk","setState","derivedState","clerkCtx","useMemo","value","clientCtx","authCtx","userCtx","sessionCtx","organizationCtx","IsomorphicClerkContext","Provider","AuthContext","setLoaded","getOrCreateInstance","appearance","localization","clearInstance","ClerkProviderBase","restIsomorphicClerkOptions","userInitialisedClerk","throwMissingPublishableKeyError","throwInvalidPublishableKeyError","ClerkProvider","multipleClerkProvidersError","setErrorThrowerOptions","packageName"],"sources":["/Users/jaybhullar/Desktop/team-5-capstone-team-5/app/frontend/node_modules/@clerk/clerk-react/src/polyfills.ts","/Users/jaybhullar/Desktop/team-5-capstone-team-5/app/frontend/node_modules/@clerk/clerk-react/src/components/uiComponents.tsx","/Users/jaybhullar/Desktop/team-5-capstone-team-5/app/frontend/node_modules/@clerk/clerk-react/src/utils/childrenUtils.tsx","/Users/jaybhullar/Desktop/team-5-capstone-team-5/app/frontend/node_modules/@clerk/clerk-react/src/utils/isConstructor.ts","/Users/jaybhullar/Desktop/team-5-capstone-team-5/app/frontend/node_modules/@clerk/clerk-react/src/utils/useMaxAllowedInstancesGuard.tsx","/Users/jaybhullar/Desktop/team-5-capstone-team-5/app/frontend/node_modules/@clerk/clerk-react/src/utils/useCustomElementPortal.tsx","/Users/jaybhullar/Desktop/team-5-capstone-team-5/app/frontend/node_modules/@clerk/clerk-react/src/utils/useCustomPages.tsx","/Users/jaybhullar/Desktop/team-5-capstone-team-5/app/frontend/node_modules/@clerk/clerk-react/src/components/SignInButton.tsx","/Users/jaybhullar/Desktop/team-5-capstone-team-5/app/frontend/node_modules/@clerk/clerk-react/src/components/SignUpButton.tsx","/Users/jaybhullar/Desktop/team-5-capstone-team-5/app/frontend/node_modules/@clerk/clerk-react/src/components/SignOutButton.tsx","/Users/jaybhullar/Desktop/team-5-capstone-team-5/app/frontend/node_modules/@clerk/clerk-react/src/components/SignInWithMetamaskButton.tsx","/Users/jaybhullar/Desktop/team-5-capstone-team-5/app/frontend/node_modules/@clerk/clerk-react/src/contexts/ClerkProvider.tsx","/Users/jaybhullar/Desktop/team-5-capstone-team-5/app/frontend/node_modules/@clerk/clerk-react/src/contexts/ClerkContextProvider.tsx","/Users/jaybhullar/Desktop/team-5-capstone-team-5/app/frontend/node_modules/@clerk/clerk-react/src/isomorphicClerk.ts","/Users/jaybhullar/Desktop/team-5-capstone-team-5/app/frontend/node_modules/@clerk/clerk-react/src/utils/deriveState.ts","/Users/jaybhullar/Desktop/team-5-capstone-team-5/app/frontend/node_modules/@clerk/clerk-react/src/index.ts"],"sourcesContent":["/**\n * Vite does not define `global` by default\n * One workaround is to use the `define` config prop\n * https://vitejs.dev/config/#define\n * We are solving this in the SDK level to reduce setup steps.\n */\nif (typeof window !== 'undefined' && !window.global) {\n  window.global = typeof global === 'undefined' ? window : global;\n}\n\nexport {};\n","import { logErrorInDevMode, without } from '@clerk/shared';\nimport { isDeeplyEqual } from '@clerk/shared/react';\nimport type {\n  CreateOrganizationProps,\n  GoogleOneTapProps,\n  OrganizationListProps,\n  OrganizationProfileProps,\n  OrganizationSwitcherProps,\n  SignInProps,\n  SignUpProps,\n  UserButtonProps,\n  UserProfileProps,\n  Without,\n} from '@clerk/types';\nimport type { PropsWithChildren } from 'react';\nimport React, { createElement } from 'react';\n\nimport {\n  organizationProfileLinkRenderedError,\n  organizationProfilePageRenderedError,\n  userProfileLinkRenderedError,\n  userProfilePageRenderedError,\n} from '../errors/messages';\nimport type {\n  MountProps,\n  OpenProps,\n  OrganizationProfileLinkProps,\n  OrganizationProfilePageProps,\n  UserProfileLinkProps,\n  UserProfilePageProps,\n  WithClerkProp,\n} from '../types';\nimport { useOrganizationProfileCustomPages, useUserProfileCustomPages } from '../utils';\nimport { withClerk } from './withClerk';\n\ntype UserProfileExportType = typeof _UserProfile & {\n  Page: typeof UserProfilePage;\n  Link: typeof UserProfileLink;\n};\n\ntype UserButtonExportType = typeof _UserButton & {\n  UserProfilePage: typeof UserProfilePage;\n  UserProfileLink: typeof UserProfileLink;\n};\n\ntype UserButtonPropsWithoutCustomPages = Without<UserButtonProps, 'userProfileProps'> & {\n  userProfileProps?: Pick<UserProfileProps, 'additionalOAuthScopes' | 'appearance'>;\n};\n\ntype OrganizationProfileExportType = typeof _OrganizationProfile & {\n  Page: typeof OrganizationProfilePage;\n  Link: typeof OrganizationProfileLink;\n};\n\ntype OrganizationSwitcherExportType = typeof _OrganizationSwitcher & {\n  OrganizationProfilePage: typeof OrganizationProfilePage;\n  OrganizationProfileLink: typeof OrganizationProfileLink;\n};\n\ntype OrganizationSwitcherPropsWithoutCustomPages = Without<OrganizationSwitcherProps, 'organizationProfileProps'> & {\n  organizationProfileProps?: Pick<OrganizationProfileProps, 'appearance'>;\n};\n\n// README: <Portal/> should be a class pure component in order for mount and unmount\n// lifecycle props to be invoked correctly. Replacing the class component with a\n// functional component wrapped with a React.memo is not identical to the original\n// class implementation due to React intricacies such as the useEffect’s cleanup\n// seems to run AFTER unmount, while componentWillUnmount runs BEFORE.\n\n// More information can be found at https://clerk.slack.com/archives/C015S0BGH8R/p1624891993016300\n\n// The function Portal implementation is commented out for future reference.\n\n// const Portal = React.memo(({ props, mount, unmount }: MountProps) => {\n//   const portalRef = React.createRef<HTMLDivElement>();\n\n//   useEffect(() => {\n//     if (portalRef.current) {\n//       mount(portalRef.current, props);\n//     }\n//     return () => {\n//       if (portalRef.current) {\n//         unmount(portalRef.current);\n//       }\n//     };\n//   }, []);\n\n//   return <div ref={portalRef} />;\n// });\n\n// Portal.displayName = 'ClerkPortal';\n\nconst isMountProps = (props: any): props is MountProps => {\n  return 'mount' in props;\n};\n\nconst isOpenProps = (props: any): props is OpenProps => {\n  return 'open' in props;\n};\n\nclass Portal extends React.PureComponent<MountProps | OpenProps> {\n  private portalRef = React.createRef<HTMLDivElement>();\n\n  componentDidUpdate(_prevProps: Readonly<MountProps | OpenProps>) {\n    if (!isMountProps(_prevProps) || !isMountProps(this.props)) {\n      return;\n    }\n    // Remove children and customPages from props before comparing\n    // children might hold circular references which deepEqual can't handle\n    // and the implementation of customPages relies on props getting new references\n    const prevProps = without(_prevProps.props, 'customPages', 'children');\n    const newProps = without(this.props.props, 'customPages', 'children');\n    // instead, we simply use the length of customPages to determine if it changed or not\n    const customPagesChanged = prevProps.customPages?.length !== newProps.customPages?.length;\n    if (!isDeeplyEqual(prevProps, newProps) || customPagesChanged) {\n      this.props.updateProps({ node: this.portalRef.current, props: this.props.props });\n    }\n  }\n\n  componentDidMount() {\n    if (this.portalRef.current) {\n      if (isMountProps(this.props)) {\n        this.props.mount(this.portalRef.current, this.props.props);\n      }\n\n      if (isOpenProps(this.props)) {\n        this.props.open(this.props.props);\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.portalRef.current) {\n      if (isMountProps(this.props)) {\n        this.props.unmount(this.portalRef.current);\n      }\n      if (isOpenProps(this.props)) {\n        this.props.close();\n      }\n    }\n  }\n\n  render() {\n    return (\n      <>\n        <div ref={this.portalRef} />\n        {isMountProps(this.props) &&\n          this.props?.customPagesPortals?.map((portal, index) => createElement(portal, { key: index }))}\n      </>\n    );\n  }\n}\n\nexport const SignIn = withClerk(({ clerk, ...props }: WithClerkProp<SignInProps>) => {\n  return (\n    <Portal\n      mount={clerk.mountSignIn}\n      unmount={clerk.unmountSignIn}\n      updateProps={(clerk as any).__unstable__updateProps}\n      props={props}\n    />\n  );\n}, 'SignIn');\n\nexport const SignUp = withClerk(({ clerk, ...props }: WithClerkProp<SignUpProps>) => {\n  return (\n    <Portal\n      mount={clerk.mountSignUp}\n      unmount={clerk.unmountSignUp}\n      updateProps={(clerk as any).__unstable__updateProps}\n      props={props}\n    />\n  );\n}, 'SignUp');\n\nexport function UserProfilePage({ children }: PropsWithChildren<UserProfilePageProps>) {\n  logErrorInDevMode(userProfilePageRenderedError);\n  return <>{children}</>;\n}\n\nexport function UserProfileLink({ children }: PropsWithChildren<UserProfileLinkProps>) {\n  logErrorInDevMode(userProfileLinkRenderedError);\n  return <>{children}</>;\n}\n\nconst _UserProfile = withClerk(\n  ({ clerk, ...props }: WithClerkProp<PropsWithChildren<Without<UserProfileProps, 'customPages'>>>) => {\n    const { customPages, customPagesPortals } = useUserProfileCustomPages(props.children);\n    return (\n      <Portal\n        mount={clerk.mountUserProfile}\n        unmount={clerk.unmountUserProfile}\n        updateProps={(clerk as any).__unstable__updateProps}\n        props={{ ...props, customPages }}\n        customPagesPortals={customPagesPortals}\n      />\n    );\n  },\n  'UserProfile',\n);\n\nexport const UserProfile: UserProfileExportType = Object.assign(_UserProfile, {\n  Page: UserProfilePage,\n  Link: UserProfileLink,\n});\n\nconst _UserButton = withClerk(\n  ({ clerk, ...props }: WithClerkProp<PropsWithChildren<UserButtonPropsWithoutCustomPages>>) => {\n    const { customPages, customPagesPortals } = useUserProfileCustomPages(props.children);\n    const userProfileProps = Object.assign(props.userProfileProps || {}, { customPages });\n    return (\n      <Portal\n        mount={clerk.mountUserButton}\n        unmount={clerk.unmountUserButton}\n        updateProps={(clerk as any).__unstable__updateProps}\n        props={{ ...props, userProfileProps }}\n        customPagesPortals={customPagesPortals}\n      />\n    );\n  },\n  'UserButton',\n);\n\nexport const UserButton: UserButtonExportType = Object.assign(_UserButton, {\n  UserProfilePage,\n  UserProfileLink,\n});\n\nexport function OrganizationProfilePage({ children }: PropsWithChildren<OrganizationProfilePageProps>) {\n  logErrorInDevMode(organizationProfilePageRenderedError);\n  return <>{children}</>;\n}\n\nexport function OrganizationProfileLink({ children }: PropsWithChildren<OrganizationProfileLinkProps>) {\n  logErrorInDevMode(organizationProfileLinkRenderedError);\n  return <>{children}</>;\n}\n\nconst _OrganizationProfile = withClerk(\n  ({ clerk, ...props }: WithClerkProp<PropsWithChildren<Without<OrganizationProfileProps, 'customPages'>>>) => {\n    const { customPages, customPagesPortals } = useOrganizationProfileCustomPages(props.children);\n    return (\n      <Portal\n        mount={clerk.mountOrganizationProfile}\n        unmount={clerk.unmountOrganizationProfile}\n        updateProps={(clerk as any).__unstable__updateProps}\n        props={{ ...props, customPages }}\n        customPagesPortals={customPagesPortals}\n      />\n    );\n  },\n  'OrganizationProfile',\n);\n\nexport const OrganizationProfile: OrganizationProfileExportType = Object.assign(_OrganizationProfile, {\n  Page: OrganizationProfilePage,\n  Link: OrganizationProfileLink,\n});\n\nexport const CreateOrganization = withClerk(({ clerk, ...props }: WithClerkProp<CreateOrganizationProps>) => {\n  return (\n    <Portal\n      mount={clerk.mountCreateOrganization}\n      unmount={clerk.unmountCreateOrganization}\n      updateProps={(clerk as any).__unstable__updateProps}\n      props={props}\n    />\n  );\n}, 'CreateOrganization');\n\nconst _OrganizationSwitcher = withClerk(\n  ({ clerk, ...props }: WithClerkProp<PropsWithChildren<OrganizationSwitcherPropsWithoutCustomPages>>) => {\n    const { customPages, customPagesPortals } = useOrganizationProfileCustomPages(props.children);\n    const organizationProfileProps = Object.assign(props.organizationProfileProps || {}, { customPages });\n    return (\n      <Portal\n        mount={clerk.mountOrganizationSwitcher}\n        unmount={clerk.unmountOrganizationSwitcher}\n        updateProps={(clerk as any).__unstable__updateProps}\n        props={{ ...props, organizationProfileProps }}\n        customPagesPortals={customPagesPortals}\n      />\n    );\n  },\n  'OrganizationSwitcher',\n);\n\nexport const OrganizationSwitcher: OrganizationSwitcherExportType = Object.assign(_OrganizationSwitcher, {\n  OrganizationProfilePage,\n  OrganizationProfileLink,\n});\n\nexport const OrganizationList = withClerk(({ clerk, ...props }: WithClerkProp<OrganizationListProps>) => {\n  return (\n    <Portal\n      mount={clerk.mountOrganizationList}\n      unmount={clerk.unmountOrganizationList}\n      updateProps={(clerk as any).__unstable__updateProps}\n      props={props}\n    />\n  );\n}, 'OrganizationList');\n\nexport const GoogleOneTap = withClerk(({ clerk, ...props }: WithClerkProp<GoogleOneTapProps>) => {\n  return (\n    <Portal\n      open={clerk.openGoogleOneTap}\n      close={clerk.closeGoogleOneTap}\n      props={props}\n    />\n  );\n}, 'GoogleOneTap');\n","import React from 'react';\n\nimport { errorThrower } from '../errors/errorThrower';\nimport { multipleChildrenInButtonComponent } from '../errors/messages';\n\nexport const assertSingleChild =\n  (children: React.ReactNode) =>\n  (name: 'SignInButton' | 'SignUpButton' | 'SignOutButton' | 'SignInWithMetamaskButton') => {\n    try {\n      return React.Children.only(children);\n    } catch (e) {\n      return errorThrower.throw(multipleChildrenInButtonComponent(name));\n    }\n  };\n\nexport const normalizeWithDefaultValue = (children: React.ReactNode | undefined, defaultText: string) => {\n  if (!children) {\n    children = defaultText;\n  }\n  if (typeof children === 'string') {\n    children = <button>{children}</button>;\n  }\n  return children;\n};\n\nexport const safeExecute =\n  (cb: unknown) =>\n  (...args: any) => {\n    if (cb && typeof cb === 'function') {\n      return cb(...args);\n    }\n  };\n","export function isConstructor<T>(f: any): f is T {\n  return typeof f === 'function';\n}\n","import React from 'react';\n\nimport { errorThrower } from '../errors/errorThrower';\n\nconst counts = new Map<string, number>();\n\nexport function useMaxAllowedInstancesGuard(name: string, error: string, maxCount = 1): void {\n  React.useEffect(() => {\n    const count = counts.get(name) || 0;\n    if (count == maxCount) {\n      return errorThrower.throw(error);\n    }\n    counts.set(name, count + 1);\n\n    return () => {\n      counts.set(name, (counts.get(name) || 1) - 1);\n    };\n  }, []);\n}\n\nexport function withMaxAllowedInstancesGuard<P>(\n  WrappedComponent: React.ComponentType<P>,\n  name: string,\n  error: string,\n): React.ComponentType<P> {\n  const displayName = WrappedComponent.displayName || WrappedComponent.name || name || 'Component';\n  const Hoc = (props: P) => {\n    useMaxAllowedInstancesGuard(name, error);\n    return <WrappedComponent {...(props as any)} />;\n  };\n  Hoc.displayName = `withMaxAllowedInstancesGuard(${displayName})`;\n  return Hoc;\n}\n","import React, { useState } from 'react';\nimport { createPortal } from 'react-dom';\n\nexport type UseCustomElementPortalParams = {\n  component: React.ReactNode;\n  id: number;\n};\n\nexport type UseCustomElementPortalReturn = {\n  portal: () => JSX.Element;\n  mount: (node: Element) => void;\n  unmount: () => void;\n  id: number;\n};\n\n// This function takes a component as prop, and returns functions that mount and unmount\n// the given component into a given node\nexport const useCustomElementPortal = (elements: UseCustomElementPortalParams[]) => {\n  const initialState = Array(elements.length).fill(null);\n  const [nodes, setNodes] = useState<(Element | null)[]>(initialState);\n\n  return elements.map((el, index) => ({\n    id: el.id,\n    mount: (node: Element) => setNodes(prevState => prevState.map((n, i) => (i === index ? node : n))),\n    unmount: () => setNodes(prevState => prevState.map((n, i) => (i === index ? null : n))),\n    portal: () => <>{nodes[index] ? createPortal(el.component, nodes[index] as Element) : null}</>,\n  }));\n};\n","import { logErrorInDevMode } from '@clerk/shared';\nimport type { CustomPage } from '@clerk/types';\nimport type { ReactElement } from 'react';\nimport React from 'react';\n\nimport {\n  OrganizationProfileLink,\n  OrganizationProfilePage,\n  UserProfileLink,\n  UserProfilePage,\n} from '../components/uiComponents';\nimport { customLinkWrongProps, customPagesIgnoredComponent, customPageWrongProps } from '../errors/messages';\nimport type { UserProfilePageProps } from '../types';\nimport type { UseCustomElementPortalParams, UseCustomElementPortalReturn } from './useCustomElementPortal';\nimport { useCustomElementPortal } from './useCustomElementPortal';\n\nconst isThatComponent = (v: any, component: React.ReactNode): v is React.ReactNode => {\n  return !!v && React.isValidElement(v) && (v as React.ReactElement)?.type === component;\n};\n\nexport const useUserProfileCustomPages = (children: React.ReactNode | React.ReactNode[]) => {\n  const reorderItemsLabels = ['account', 'security'];\n  return useCustomPages({\n    children,\n    reorderItemsLabels,\n    LinkComponent: UserProfileLink,\n    PageComponent: UserProfilePage,\n    componentName: 'UserProfile',\n  });\n};\n\nexport const useOrganizationProfileCustomPages = (children: React.ReactNode | React.ReactNode[]) => {\n  const reorderItemsLabels = ['general', 'members'];\n  return useCustomPages({\n    children,\n    reorderItemsLabels,\n    LinkComponent: OrganizationProfileLink,\n    PageComponent: OrganizationProfilePage,\n    componentName: 'OrganizationProfile',\n  });\n};\n\ntype UseCustomPagesParams = {\n  children: React.ReactNode | React.ReactNode[];\n  LinkComponent: any;\n  PageComponent: any;\n  reorderItemsLabels: string[];\n  componentName: string;\n};\n\ntype CustomPageWithIdType = UserProfilePageProps & { children?: React.ReactNode };\n\nconst useCustomPages = ({\n  children,\n  LinkComponent,\n  PageComponent,\n  reorderItemsLabels,\n  componentName,\n}: UseCustomPagesParams) => {\n  const validChildren: CustomPageWithIdType[] = [];\n\n  React.Children.forEach(children, child => {\n    if (!isThatComponent(child, PageComponent) && !isThatComponent(child, LinkComponent)) {\n      if (child) {\n        logErrorInDevMode(customPagesIgnoredComponent(componentName));\n      }\n      return;\n    }\n\n    const { props } = child as ReactElement;\n\n    const { children, label, url, labelIcon } = props;\n\n    if (isThatComponent(child, PageComponent)) {\n      if (isReorderItem(props, reorderItemsLabels)) {\n        // This is a reordering item\n        validChildren.push({ label });\n      } else if (isCustomPage(props)) {\n        // this is a custom page\n        validChildren.push({ label, labelIcon, children, url });\n      } else {\n        logErrorInDevMode(customPageWrongProps(componentName));\n        return;\n      }\n    }\n\n    if (isThatComponent(child, LinkComponent)) {\n      if (isExternalLink(props)) {\n        // This is an external link\n        validChildren.push({ label, labelIcon, url });\n      } else {\n        logErrorInDevMode(customLinkWrongProps(componentName));\n        return;\n      }\n    }\n  });\n\n  const customPageContents: UseCustomElementPortalParams[] = [];\n  const customPageLabelIcons: UseCustomElementPortalParams[] = [];\n  const customLinkLabelIcons: UseCustomElementPortalParams[] = [];\n\n  validChildren.forEach((cp, index) => {\n    if (isCustomPage(cp)) {\n      customPageContents.push({ component: cp.children, id: index });\n      customPageLabelIcons.push({ component: cp.labelIcon, id: index });\n      return;\n    }\n    if (isExternalLink(cp)) {\n      customLinkLabelIcons.push({ component: cp.labelIcon, id: index });\n    }\n  });\n\n  const customPageContentsPortals = useCustomElementPortal(customPageContents);\n  const customPageLabelIconsPortals = useCustomElementPortal(customPageLabelIcons);\n  const customLinkLabelIconsPortals = useCustomElementPortal(customLinkLabelIcons);\n\n  const customPages: CustomPage[] = [];\n  const customPagesPortals: React.ComponentType[] = [];\n\n  validChildren.forEach((cp, index) => {\n    if (isReorderItem(cp, reorderItemsLabels)) {\n      customPages.push({ label: cp.label });\n      return;\n    }\n    if (isCustomPage(cp)) {\n      const {\n        portal: contentPortal,\n        mount,\n        unmount,\n      } = customPageContentsPortals.find(p => p.id === index) as UseCustomElementPortalReturn;\n      const {\n        portal: labelPortal,\n        mount: mountIcon,\n        unmount: unmountIcon,\n      } = customPageLabelIconsPortals.find(p => p.id === index) as UseCustomElementPortalReturn;\n      customPages.push({ label: cp.label, url: cp.url, mount, unmount, mountIcon, unmountIcon });\n      customPagesPortals.push(contentPortal);\n      customPagesPortals.push(labelPortal);\n      return;\n    }\n    if (isExternalLink(cp)) {\n      const {\n        portal: labelPortal,\n        mount: mountIcon,\n        unmount: unmountIcon,\n      } = customLinkLabelIconsPortals.find(p => p.id === index) as UseCustomElementPortalReturn;\n      customPages.push({ label: cp.label, url: cp.url, mountIcon, unmountIcon });\n      customPagesPortals.push(labelPortal);\n      return;\n    }\n  });\n\n  return { customPages, customPagesPortals };\n};\n\nconst isReorderItem = (childProps: any, validItems: string[]): boolean => {\n  const { children, label, url, labelIcon } = childProps;\n  return !children && !url && !labelIcon && validItems.some(v => v === label);\n};\n\nconst isCustomPage = (childProps: any): boolean => {\n  const { children, label, url, labelIcon } = childProps;\n  return !!children && !!url && !!labelIcon && !!label;\n};\n\nconst isExternalLink = (childProps: any): boolean => {\n  const { children, label, url, labelIcon } = childProps;\n  return !children && !!url && !!labelIcon && !!label;\n};\n","import type { SignInProps } from '@clerk/types';\nimport React from 'react';\n\nimport type { SignInButtonProps, WithClerkProp } from '../types';\nimport { assertSingleChild, normalizeWithDefaultValue, safeExecute } from '../utils';\nimport { withClerk } from './withClerk';\n\nexport const SignInButton = withClerk(({ clerk, children, ...props }: WithClerkProp<SignInButtonProps>) => {\n  const { signUpFallbackRedirectUrl, forceRedirectUrl, fallbackRedirectUrl, signUpForceRedirectUrl, mode, ...rest } =\n    props;\n  children = normalizeWithDefaultValue(children, 'Sign in');\n  const child = assertSingleChild(children)('SignInButton');\n\n  const clickHandler = () => {\n    const opts: SignInProps = {\n      forceRedirectUrl,\n      fallbackRedirectUrl,\n      signUpFallbackRedirectUrl,\n      signUpForceRedirectUrl,\n    };\n\n    if (mode === 'modal') {\n      return clerk.openSignIn(opts);\n    }\n    return clerk.redirectToSignIn({\n      ...opts,\n      signInFallbackRedirectUrl: fallbackRedirectUrl,\n      signInForceRedirectUrl: forceRedirectUrl,\n    });\n  };\n\n  const wrappedChildClickHandler: React.MouseEventHandler = async e => {\n    if (child && typeof child === 'object' && 'props' in child) {\n      await safeExecute(child.props.onClick)(e);\n    }\n    return clickHandler();\n  };\n\n  const childProps = { ...rest, onClick: wrappedChildClickHandler };\n  return React.cloneElement(child as React.ReactElement<unknown>, childProps);\n}, 'SignInButton');\n","import type { SignUpProps } from '@clerk/types';\nimport React from 'react';\n\nimport type { SignUpButtonProps, WithClerkProp } from '../types';\nimport { assertSingleChild, normalizeWithDefaultValue, safeExecute } from '../utils';\nimport { withClerk } from './withClerk';\n\nexport const SignUpButton = withClerk(({ clerk, children, ...props }: WithClerkProp<SignUpButtonProps>) => {\n  const {\n    fallbackRedirectUrl,\n    forceRedirectUrl,\n    signInFallbackRedirectUrl,\n    signInForceRedirectUrl,\n    mode,\n    unsafeMetadata,\n    ...rest\n  } = props;\n\n  children = normalizeWithDefaultValue(children, 'Sign up');\n  const child = assertSingleChild(children)('SignUpButton');\n\n  const clickHandler = () => {\n    const opts: SignUpProps = {\n      fallbackRedirectUrl,\n      forceRedirectUrl,\n      signInFallbackRedirectUrl,\n      signInForceRedirectUrl,\n      unsafeMetadata,\n    };\n\n    if (mode === 'modal') {\n      return clerk.openSignUp(opts);\n    }\n\n    return clerk.redirectToSignUp({\n      ...opts,\n      signUpFallbackRedirectUrl: fallbackRedirectUrl,\n      signUpForceRedirectUrl: forceRedirectUrl,\n    });\n  };\n\n  const wrappedChildClickHandler: React.MouseEventHandler = async e => {\n    if (child && typeof child === 'object' && 'props' in child) {\n      await safeExecute(child.props.onClick)(e);\n    }\n    return clickHandler();\n  };\n\n  const childProps = { ...rest, onClick: wrappedChildClickHandler };\n  return React.cloneElement(child as React.ReactElement<unknown>, childProps);\n}, 'SignUpButton');\n","import type { SignOutOptions } from '@clerk/types';\nimport React from 'react';\n\nimport type { WithClerkProp } from '../types';\nimport { assertSingleChild, normalizeWithDefaultValue, safeExecute } from '../utils';\nimport { withClerk } from './withClerk';\n\nexport type SignOutButtonProps = {\n  redirectUrl?: string;\n  signOutOptions?: SignOutOptions;\n  children?: React.ReactNode;\n};\n\nexport const SignOutButton = withClerk(\n  ({ clerk, children, ...props }: React.PropsWithChildren<WithClerkProp<SignOutButtonProps>>) => {\n    const { redirectUrl = '/', signOutOptions, ...rest } = props;\n\n    children = normalizeWithDefaultValue(children, 'Sign out');\n    const child = assertSingleChild(children)('SignOutButton');\n\n    const clickHandler = () => clerk.signOut({ redirectUrl });\n    const wrappedChildClickHandler: React.MouseEventHandler = async e => {\n      await safeExecute((child as any).props.onClick)(e);\n      return clickHandler();\n    };\n\n    const childProps = { ...rest, onClick: wrappedChildClickHandler };\n    return React.cloneElement(child as React.ReactElement<unknown>, childProps);\n  },\n  'SignOutButton',\n);\n","import React from 'react';\n\nimport type { SignInWithMetamaskButtonProps, WithClerkProp } from '../types';\nimport { assertSingleChild, normalizeWithDefaultValue, safeExecute } from '../utils';\nimport { withClerk } from './withClerk';\n\nexport const SignInWithMetamaskButton = withClerk(\n  ({ clerk, children, ...props }: WithClerkProp<SignInWithMetamaskButtonProps>) => {\n    const { redirectUrl, ...rest } = props;\n\n    children = normalizeWithDefaultValue(children, 'Sign in with Metamask');\n    const child = assertSingleChild(children)('SignInWithMetamaskButton');\n\n    // TODO: Properly fix this code\n    // eslint-disable-next-line @typescript-eslint/require-await\n    const clickHandler = async () => {\n      async function authenticate() {\n        await clerk.authenticateWithMetamask({ redirectUrl: redirectUrl || undefined });\n      }\n      void authenticate();\n    };\n\n    const wrappedChildClickHandler: React.MouseEventHandler = async e => {\n      await safeExecute((child as any).props.onClick)(e);\n      return clickHandler();\n    };\n\n    const childProps = { ...rest, onClick: wrappedChildClickHandler };\n    return React.cloneElement(child as React.ReactElement<unknown>, childProps);\n  },\n  'SignInWithMetamask',\n);\n","import { isPublishableKey } from '@clerk/shared/keys';\nimport React from 'react';\n\nimport { errorThrower } from '../errors/errorThrower';\nimport { multipleClerkProvidersError } from '../errors/messages';\nimport type { ClerkProviderProps } from '../types';\nimport { withMaxAllowedInstancesGuard } from '../utils';\nimport { ClerkContextProvider } from './ClerkContextProvider';\n\nfunction ClerkProviderBase(props: ClerkProviderProps): JSX.Element {\n  const { initialState, children, ...restIsomorphicClerkOptions } = props;\n  const { publishableKey = '', Clerk: userInitialisedClerk } = restIsomorphicClerkOptions;\n\n  if (!userInitialisedClerk) {\n    if (!publishableKey) {\n      errorThrower.throwMissingPublishableKeyError();\n    } else if (publishableKey && !isPublishableKey(publishableKey)) {\n      errorThrower.throwInvalidPublishableKeyError({ key: publishableKey });\n    }\n  }\n\n  return (\n    <ClerkContextProvider\n      initialState={initialState}\n      isomorphicClerkOptions={restIsomorphicClerkOptions}\n    >\n      {children}\n    </ClerkContextProvider>\n  );\n}\n\nconst ClerkProvider = withMaxAllowedInstancesGuard(ClerkProviderBase, 'ClerkProvider', multipleClerkProvidersError);\n\nClerkProvider.displayName = 'ClerkProvider';\n\nexport { ClerkProvider };\n","import { ClientContext, OrganizationProvider, SessionContext, UserContext } from '@clerk/shared/react';\nimport type { ClientResource, InitialState, Resources } from '@clerk/types';\nimport React from 'react';\n\nimport { IsomorphicClerk } from '../isomorphicClerk';\nimport type { IsomorphicClerkOptions } from '../types';\nimport { deriveState } from '../utils/deriveState';\nimport { AuthContext } from './AuthContext';\nimport { IsomorphicClerkContext } from './IsomorphicClerkContext';\n\ntype ClerkContextProvider = {\n  isomorphicClerkOptions: IsomorphicClerkOptions;\n  initialState: InitialState | undefined;\n  children: React.ReactNode;\n};\n\nexport type ClerkContextProviderState = Resources;\n\nexport function ClerkContextProvider(props: ClerkContextProvider): JSX.Element | null {\n  const { isomorphicClerkOptions, initialState, children } = props;\n  const { isomorphicClerk: clerk, loaded: clerkLoaded } = useLoadedIsomorphicClerk(isomorphicClerkOptions);\n\n  const [state, setState] = React.useState<ClerkContextProviderState>({\n    client: clerk.client as ClientResource,\n    session: clerk.session,\n    user: clerk.user,\n    organization: clerk.organization,\n  });\n\n  React.useEffect(() => {\n    return clerk.addListener(e => setState({ ...e }));\n  }, []);\n\n  const derivedState = deriveState(clerkLoaded, state, initialState);\n  const clerkCtx = React.useMemo(() => ({ value: clerk }), [clerkLoaded]);\n  const clientCtx = React.useMemo(() => ({ value: state.client }), [state.client]);\n\n  const { sessionId, session, userId, user, orgId, actor, organization, orgRole, orgSlug, orgPermissions } =\n    derivedState;\n\n  const authCtx = React.useMemo(() => {\n    const value = { sessionId, userId, actor, orgId, orgRole, orgSlug, orgPermissions };\n    return { value };\n  }, [sessionId, userId, actor, orgId, orgRole, orgSlug]);\n  const userCtx = React.useMemo(() => ({ value: user }), [userId, user]);\n  const sessionCtx = React.useMemo(() => ({ value: session }), [sessionId, session]);\n  const organizationCtx = React.useMemo(() => {\n    const value = {\n      organization: organization,\n    };\n    return { value };\n  }, [orgId, organization]);\n\n  return (\n    // @ts-expect-error value passed is of type IsomorphicClerk where the context expects LoadedClerk\n    <IsomorphicClerkContext.Provider value={clerkCtx}>\n      <ClientContext.Provider value={clientCtx}>\n        <SessionContext.Provider value={sessionCtx}>\n          <OrganizationProvider {...organizationCtx.value}>\n            <AuthContext.Provider value={authCtx}>\n              <UserContext.Provider value={userCtx}>{children}</UserContext.Provider>\n            </AuthContext.Provider>\n          </OrganizationProvider>\n        </SessionContext.Provider>\n      </ClientContext.Provider>\n    </IsomorphicClerkContext.Provider>\n  );\n}\n\nconst useLoadedIsomorphicClerk = (options: IsomorphicClerkOptions) => {\n  const [loaded, setLoaded] = React.useState(false);\n  const isomorphicClerk = React.useMemo(() => IsomorphicClerk.getOrCreateInstance(options), []);\n\n  React.useEffect(() => {\n    isomorphicClerk.__unstable__updateProps({ appearance: options.appearance });\n  }, [options.appearance]);\n\n  React.useEffect(() => {\n    isomorphicClerk.__unstable__updateProps({ options });\n  }, [options.localization]);\n\n  React.useEffect(() => {\n    isomorphicClerk.addOnLoaded(() => setLoaded(true));\n  }, []);\n\n  React.useEffect(() => {\n    return () => {\n      IsomorphicClerk.clearInstance();\n    };\n  }, []);\n\n  return { isomorphicClerk, loaded };\n};\n","import { inBrowser } from '@clerk/shared/browser';\nimport { handleValueOrFn } from '@clerk/shared/handleValueOrFn';\nimport type { TelemetryCollector } from '@clerk/shared/telemetry';\nimport type {\n  ActiveSessionResource,\n  AuthenticateWithGoogleOneTapParams,\n  AuthenticateWithMetamaskParams,\n  Clerk,\n  ClientResource,\n  CreateOrganizationParams,\n  CreateOrganizationProps,\n  DomainOrProxyUrl,\n  GoogleOneTapProps,\n  HandleEmailLinkVerificationParams,\n  HandleOAuthCallbackParams,\n  InstanceType,\n  ListenerCallback,\n  LoadedClerk,\n  OrganizationListProps,\n  OrganizationProfileProps,\n  OrganizationResource,\n  OrganizationSwitcherProps,\n  RedirectOptions,\n  SDKMetadata,\n  SetActiveParams,\n  SignInProps,\n  SignInRedirectOptions,\n  SignInResource,\n  SignOut,\n  SignOutCallback,\n  SignOutOptions,\n  SignUpProps,\n  SignUpRedirectOptions,\n  SignUpResource,\n  UnsubscribeCallback,\n  UserButtonProps,\n  UserProfileProps,\n  UserResource,\n  Without,\n} from '@clerk/types';\n\nimport { errorThrower } from './errors/errorThrower';\nimport { unsupportedNonBrowserDomainOrProxyUrlFunction } from './errors/messages';\nimport type {\n  BrowserClerk,\n  BrowserClerkConstructor,\n  ClerkProp,\n  HeadlessBrowserClerk,\n  HeadlessBrowserClerkConstructor,\n  IsomorphicClerkOptions,\n} from './types';\nimport { isConstructor, loadClerkJsScript } from './utils';\n\nconst SDK_METADATA = {\n  name: PACKAGE_NAME,\n  version: PACKAGE_VERSION,\n  environment: process.env.NODE_ENV,\n};\n\nexport interface Global {\n  Clerk?: HeadlessBrowserClerk | BrowserClerk;\n}\n\ndeclare const global: Global;\n\ntype GenericFunction<TArgs = never> = (...args: TArgs[]) => unknown;\n\ntype MethodName<T> = {\n  [P in keyof T]: T[P] extends GenericFunction ? P : never;\n}[keyof T];\n\ntype MethodCallback = () => Promise<unknown> | unknown;\n\ntype IsomorphicLoadedClerk = Without<\n  LoadedClerk,\n  /**\n   * Override ClerkJS methods in order to support premountMethodCalls\n   */\n  | 'buildSignInUrl'\n  | 'buildSignUpUrl'\n  | 'buildUserProfileUrl'\n  | 'buildCreateOrganizationUrl'\n  | 'buildOrganizationProfileUrl'\n  | 'buildAfterSignUpUrl'\n  | 'buildAfterSignInUrl'\n  | 'buildAfterSignOutUrl'\n  | 'buildUrlWithAuth'\n  | 'handleRedirectCallback'\n  | 'handleGoogleOneTapCallback'\n  | 'handleUnauthenticated'\n  | 'authenticateWithMetamask'\n  | 'authenticateWithGoogleOneTap'\n  | 'createOrganization'\n  | 'getOrganization'\n  | 'mountUserButton'\n  | 'mountOrganizationList'\n  | 'mountOrganizationSwitcher'\n  | 'mountOrganizationProfile'\n  | 'mountCreateOrganization'\n  | 'mountSignUp'\n  | 'mountSignIn'\n  | 'mountUserProfile'\n  | 'client'\n> & {\n  // TODO: Align return type and parms\n  handleRedirectCallback: (params: HandleOAuthCallbackParams) => void;\n  handleGoogleOneTapCallback: (signInOrUp: SignInResource | SignUpResource, params: HandleOAuthCallbackParams) => void;\n  handleUnauthenticated: () => void;\n  // TODO: Align Promise unknown\n  authenticateWithMetamask: (params: AuthenticateWithMetamaskParams) => Promise<void>;\n  authenticateWithGoogleOneTap: (\n    params: AuthenticateWithGoogleOneTapParams,\n  ) => Promise<SignInResource | SignUpResource>;\n  // TODO: Align return type (maybe not possible or correct)\n  createOrganization: (params: CreateOrganizationParams) => Promise<OrganizationResource | void>;\n  // TODO: Align return type (maybe not possible or correct)\n  getOrganization: (organizationId: string) => Promise<OrganizationResource | void>;\n\n  // TODO: Align return type\n  buildSignInUrl: (opts?: RedirectOptions) => string | void;\n  // TODO: Align return type\n  buildSignUpUrl: (opts?: RedirectOptions) => string | void;\n  // TODO: Align return type\n  buildUserProfileUrl: () => string | void;\n  // TODO: Align return type\n  buildCreateOrganizationUrl: () => string | void;\n  // TODO: Align return type\n  buildOrganizationProfileUrl: () => string | void;\n  // TODO: Align return type\n  buildAfterSignInUrl: () => string | void;\n  // TODO: Align return type\n  buildAfterSignUpUrl: () => string | void;\n  // TODO: Align return type\n  buildAfterSignOutUrl: () => string | void;\n  // TODO: Align optional props\n  mountUserButton: (node: HTMLDivElement, props: UserButtonProps) => void;\n  mountOrganizationList: (node: HTMLDivElement, props: OrganizationListProps) => void;\n  mountOrganizationSwitcher: (node: HTMLDivElement, props: OrganizationSwitcherProps) => void;\n  mountOrganizationProfile: (node: HTMLDivElement, props: OrganizationProfileProps) => void;\n  mountCreateOrganization: (node: HTMLDivElement, props: CreateOrganizationProps) => void;\n  mountSignUp: (node: HTMLDivElement, props: SignUpProps) => void;\n  mountSignIn: (node: HTMLDivElement, props: SignInProps) => void;\n  mountUserProfile: (node: HTMLDivElement, props: UserProfileProps) => void;\n  client: ClientResource | undefined;\n};\n\nexport class IsomorphicClerk implements IsomorphicLoadedClerk {\n  private readonly mode: 'browser' | 'server';\n  private readonly options: IsomorphicClerkOptions;\n  private readonly Clerk: ClerkProp;\n  private clerkjs: BrowserClerk | HeadlessBrowserClerk | null = null;\n  private preopenOneTap?: null | GoogleOneTapProps = null;\n  private preopenSignIn?: null | SignInProps = null;\n  private preopenSignUp?: null | SignUpProps = null;\n  private preopenUserProfile?: null | UserProfileProps = null;\n  private preopenOrganizationProfile?: null | OrganizationProfileProps = null;\n  private preopenCreateOrganization?: null | CreateOrganizationProps = null;\n  private premountSignInNodes = new Map<HTMLDivElement, SignInProps>();\n  private premountSignUpNodes = new Map<HTMLDivElement, SignUpProps>();\n  private premountUserProfileNodes = new Map<HTMLDivElement, UserProfileProps>();\n  private premountUserButtonNodes = new Map<HTMLDivElement, UserButtonProps>();\n  private premountOrganizationProfileNodes = new Map<HTMLDivElement, OrganizationProfileProps>();\n  private premountCreateOrganizationNodes = new Map<HTMLDivElement, CreateOrganizationProps>();\n  private premountOrganizationSwitcherNodes = new Map<HTMLDivElement, OrganizationSwitcherProps>();\n  private premountOrganizationListNodes = new Map<HTMLDivElement, OrganizationListProps>();\n  private premountMethodCalls = new Map<MethodName<BrowserClerk>, MethodCallback>();\n  private loadedListeners: Array<() => void> = [];\n\n  #loaded = false;\n  #domain: DomainOrProxyUrl['domain'];\n  #proxyUrl: DomainOrProxyUrl['proxyUrl'];\n  #publishableKey: string;\n\n  get publishableKey(): string {\n    return this.#publishableKey;\n  }\n\n  get loaded(): boolean {\n    return this.#loaded;\n  }\n\n  static #instance: IsomorphicClerk | null | undefined;\n\n  static getOrCreateInstance(options: IsomorphicClerkOptions) {\n    // During SSR: a new instance should be created for every request\n    // During CSR: use the cached instance for the whole lifetime of the app\n    // Also will recreate the instance if the provided Clerk instance changes\n    // This method should be idempotent in both scenarios\n    if (!inBrowser() || !this.#instance || (options.Clerk && this.#instance.Clerk !== options.Clerk)) {\n      this.#instance = new IsomorphicClerk(options);\n    }\n    return this.#instance;\n  }\n\n  static clearInstance() {\n    this.#instance = null;\n  }\n\n  get domain(): string {\n    // This getter can run in environments where window is not available.\n    // In those cases we should expect and use domain as a string\n    if (typeof window !== 'undefined' && window.location) {\n      return handleValueOrFn(this.#domain, new URL(window.location.href), '');\n    }\n    if (typeof this.#domain === 'function') {\n      return errorThrower.throw(unsupportedNonBrowserDomainOrProxyUrlFunction);\n    }\n    return this.#domain || '';\n  }\n\n  get proxyUrl(): string {\n    // This getter can run in environments where window is not available.\n    // In those cases we should expect and use proxy as a string\n    if (typeof window !== 'undefined' && window.location) {\n      return handleValueOrFn(this.#proxyUrl, new URL(window.location.href), '');\n    }\n    if (typeof this.#proxyUrl === 'function') {\n      return errorThrower.throw(unsupportedNonBrowserDomainOrProxyUrlFunction);\n    }\n    return this.#proxyUrl || '';\n  }\n\n  constructor(options: IsomorphicClerkOptions) {\n    const { Clerk = null, publishableKey } = options || {};\n    this.#publishableKey = publishableKey;\n    this.#proxyUrl = options?.proxyUrl;\n    this.#domain = options?.domain;\n    this.options = options;\n    this.Clerk = Clerk;\n    this.mode = inBrowser() ? 'browser' : 'server';\n\n    if (!this.options.sdkMetadata) {\n      this.options.sdkMetadata = SDK_METADATA;\n    }\n\n    void this.loadClerkJS();\n  }\n\n  get sdkMetadata(): SDKMetadata | undefined {\n    return this.clerkjs?.sdkMetadata || this.options.sdkMetadata || undefined;\n  }\n\n  get instanceType(): InstanceType | undefined {\n    return this.clerkjs?.instanceType;\n  }\n\n  get frontendApi(): string {\n    return this.clerkjs?.frontendApi || '';\n  }\n\n  get isStandardBrowser(): boolean {\n    return this.clerkjs?.isStandardBrowser || this.options.standardBrowser || false;\n  }\n\n  get isSatellite(): boolean {\n    // This getter can run in environments where window is not available.\n    // In those cases we should expect and use domain as a string\n    if (typeof window !== 'undefined' && window.location) {\n      return handleValueOrFn(this.options.isSatellite, new URL(window.location.href), false);\n    }\n    if (typeof this.options.isSatellite === 'function') {\n      return errorThrower.throw(unsupportedNonBrowserDomainOrProxyUrlFunction);\n    }\n    return false;\n  }\n\n  buildSignInUrl = (opts?: RedirectOptions): string | void => {\n    const callback = () => this.clerkjs?.buildSignInUrl(opts) || '';\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('buildSignInUrl', callback);\n    }\n  };\n\n  buildSignUpUrl = (opts?: RedirectOptions): string | void => {\n    const callback = () => this.clerkjs?.buildSignUpUrl(opts) || '';\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('buildSignUpUrl', callback);\n    }\n  };\n\n  buildAfterSignInUrl = (): string | void => {\n    const callback = () => this.clerkjs?.buildAfterSignInUrl() || '';\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('buildAfterSignInUrl', callback);\n    }\n  };\n\n  buildAfterSignUpUrl = (): string | void => {\n    const callback = () => this.clerkjs?.buildAfterSignUpUrl() || '';\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('buildAfterSignUpUrl', callback);\n    }\n  };\n\n  buildAfterSignOutUrl = (): string | void => {\n    const callback = () => this.clerkjs?.buildAfterSignOutUrl() || '';\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('buildAfterSignOutUrl', callback);\n    }\n  };\n\n  buildUserProfileUrl = (): string | void => {\n    const callback = () => this.clerkjs?.buildUserProfileUrl() || '';\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('buildUserProfileUrl', callback);\n    }\n  };\n\n  buildCreateOrganizationUrl = (): string | void => {\n    const callback = () => this.clerkjs?.buildCreateOrganizationUrl() || '';\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('buildCreateOrganizationUrl', callback);\n    }\n  };\n\n  buildOrganizationProfileUrl = (): string | void => {\n    const callback = () => this.clerkjs?.buildOrganizationProfileUrl() || '';\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('buildOrganizationProfileUrl', callback);\n    }\n  };\n\n  buildUrlWithAuth = (to: string): string | void => {\n    const callback = () => this.clerkjs?.buildUrlWithAuth(to) || '';\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('buildUrlWithAuth', callback);\n    }\n  };\n\n  handleUnauthenticated = (): void => {\n    const callback = () => this.clerkjs?.handleUnauthenticated();\n    if (this.clerkjs && this.#loaded) {\n      void callback();\n    } else {\n      this.premountMethodCalls.set('handleUnauthenticated', callback);\n    }\n  };\n\n  #waitForClerkJS(): Promise<HeadlessBrowserClerk | BrowserClerk> {\n    return new Promise<HeadlessBrowserClerk | BrowserClerk>(resolve => {\n      if (this.#loaded) {\n        resolve(this.clerkjs!);\n      }\n      this.addOnLoaded(() => resolve(this.clerkjs!));\n    });\n  }\n\n  async loadClerkJS(): Promise<HeadlessBrowserClerk | BrowserClerk | undefined> {\n    if (this.mode !== 'browser' || this.#loaded) {\n      return;\n    }\n\n    // Store frontendAPI value on window as a fallback. This value can be used as a\n    // fallback during ClerkJS hot loading in case ClerkJS fails to find the\n    // \"data-clerk-frontend-api\" attribute on its script tag.\n\n    // This can happen when the DOM is altered completely during client rehydration.\n    // For example, in Remix with React 18 the document changes completely via `hydrateRoot(document)`.\n\n    // For more information refer to:\n    // - https://github.com/remix-run/remix/issues/2947\n    // - https://github.com/facebook/react/issues/24430\n    if (typeof window !== 'undefined') {\n      window.__clerk_publishable_key = this.#publishableKey;\n      window.__clerk_proxy_url = this.proxyUrl;\n      window.__clerk_domain = this.domain;\n    }\n\n    try {\n      if (this.Clerk) {\n        // Set a fixed Clerk version\n        let c: ClerkProp;\n\n        if (isConstructor<BrowserClerkConstructor | HeadlessBrowserClerkConstructor>(this.Clerk)) {\n          // Construct a new Clerk object if a constructor is passed\n          c = new this.Clerk(this.#publishableKey, {\n            proxyUrl: this.proxyUrl,\n            domain: this.domain,\n          } as any);\n\n          await c.load(this.options);\n        } else {\n          // Otherwise use the instantiated Clerk object\n          c = this.Clerk;\n\n          if (!c.loaded) {\n            await c.load(this.options);\n          }\n        }\n\n        global.Clerk = c;\n      } else {\n        // Hot-load latest ClerkJS from Clerk CDN\n        if (!global.Clerk) {\n          await loadClerkJsScript({\n            ...this.options,\n            publishableKey: this.#publishableKey,\n            proxyUrl: this.proxyUrl,\n            domain: this.domain,\n          });\n        }\n\n        if (!global.Clerk) {\n          throw new Error('Failed to download latest ClerkJS. Contact support@clerk.com.');\n        }\n\n        await global.Clerk.load(this.options);\n      }\n\n      if (global.Clerk?.loaded) {\n        return this.hydrateClerkJS(global.Clerk);\n      }\n      return;\n    } catch (err) {\n      const error = err as Error;\n      // In Next.js we can throw a full screen error in development mode.\n      // However, in production throwing an error results in an infinite loop.\n      // More info at: https://github.com/vercel/next.js/issues/6973\n      if (process.env.NODE_ENV === 'production') {\n        console.error(error.stack || error.message || error);\n      } else {\n        throw err;\n      }\n      return;\n    }\n  }\n\n  public addOnLoaded = (cb: () => void) => {\n    this.loadedListeners.push(cb);\n    /**\n     * When IsomorphicClerk is loaded execute the callback directly\n     */\n    if (this.loaded) {\n      this.emitLoaded();\n    }\n  };\n\n  public emitLoaded = () => {\n    this.loadedListeners.forEach(cb => cb());\n    this.loadedListeners = [];\n  };\n\n  private hydrateClerkJS = (clerkjs: BrowserClerk | HeadlessBrowserClerk | undefined) => {\n    if (!clerkjs) {\n      throw new Error('Failed to hydrate latest Clerk JS');\n    }\n\n    this.clerkjs = clerkjs;\n\n    this.premountMethodCalls.forEach(cb => cb());\n\n    if (this.preopenSignIn !== null) {\n      clerkjs.openSignIn(this.preopenSignIn);\n    }\n\n    if (this.preopenSignUp !== null) {\n      clerkjs.openSignUp(this.preopenSignUp);\n    }\n\n    if (this.preopenUserProfile !== null) {\n      clerkjs.openUserProfile(this.preopenUserProfile);\n    }\n\n    if (this.preopenOneTap !== null) {\n      clerkjs.openGoogleOneTap(this.preopenOneTap);\n    }\n\n    if (this.preopenOrganizationProfile !== null) {\n      clerkjs.openOrganizationProfile(this.preopenOrganizationProfile);\n    }\n\n    if (this.preopenCreateOrganization !== null) {\n      clerkjs.openCreateOrganization(this.preopenCreateOrganization);\n    }\n\n    this.premountSignInNodes.forEach((props: SignInProps, node: HTMLDivElement) => {\n      clerkjs.mountSignIn(node, props);\n    });\n\n    this.premountSignUpNodes.forEach((props: SignUpProps, node: HTMLDivElement) => {\n      clerkjs.mountSignUp(node, props);\n    });\n\n    this.premountUserProfileNodes.forEach((props: UserProfileProps, node: HTMLDivElement) => {\n      clerkjs.mountUserProfile(node, props);\n    });\n\n    this.premountUserButtonNodes.forEach((props: UserButtonProps, node: HTMLDivElement) => {\n      clerkjs.mountUserButton(node, props);\n    });\n\n    this.premountOrganizationListNodes.forEach((props: OrganizationListProps, node: HTMLDivElement) => {\n      clerkjs.mountOrganizationList(node, props);\n    });\n\n    this.#loaded = true;\n    this.emitLoaded();\n    return this.clerkjs;\n  };\n\n  get version(): string | undefined {\n    return this.clerkjs?.version;\n  }\n\n  get client(): ClientResource | undefined {\n    if (this.clerkjs) {\n      return this.clerkjs.client;\n      // TODO: add ssr condition\n    } else {\n      return undefined;\n    }\n  }\n\n  get session(): ActiveSessionResource | undefined | null {\n    if (this.clerkjs) {\n      return this.clerkjs.session;\n    } else {\n      return undefined;\n    }\n  }\n\n  get user(): UserResource | undefined | null {\n    if (this.clerkjs) {\n      return this.clerkjs.user;\n    } else {\n      return undefined;\n    }\n  }\n\n  get organization(): OrganizationResource | undefined | null {\n    if (this.clerkjs) {\n      return this.clerkjs.organization;\n    } else {\n      return undefined;\n    }\n  }\n\n  get telemetry(): TelemetryCollector | undefined {\n    if (this.clerkjs) {\n      // @ts-expect-error -- We can't add the type here due to the TelemetryCollector type existing in shared, but the Clerk type existing in types\n      return this.clerkjs.telemetry;\n    } else {\n      return undefined;\n    }\n  }\n\n  get __unstable__environment(): any {\n    if (this.clerkjs) {\n      return (this.clerkjs as any).__unstable__environment;\n      // TODO: add ssr condition\n    } else {\n      return undefined;\n    }\n  }\n\n  __unstable__setEnvironment(...args: any): void {\n    if (this.clerkjs && '__unstable__setEnvironment' in this.clerkjs) {\n      (this.clerkjs as any).__unstable__setEnvironment(args);\n    } else {\n      return undefined;\n    }\n  }\n\n  __unstable__updateProps = (props: any): any => {\n    // Handle case where accounts has clerk-react@4 installed, but clerk-js@3 is manually loaded\n    if (this.clerkjs && '__unstable__updateProps' in this.clerkjs) {\n      (this.clerkjs as any).__unstable__updateProps(props);\n    } else {\n      return undefined;\n    }\n  };\n\n  /**\n   * `setActive` can be used to set the active session and/or organization.\n   */\n  setActive = ({ session, organization, beforeEmit }: SetActiveParams): Promise<void> => {\n    if (this.clerkjs) {\n      return this.clerkjs.setActive({ session, organization, beforeEmit });\n    } else {\n      return Promise.reject();\n    }\n  };\n\n  openSignIn = (props?: SignInProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.openSignIn(props);\n    } else {\n      this.preopenSignIn = props;\n    }\n  };\n\n  closeSignIn = (): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.closeSignIn();\n    } else {\n      this.preopenSignIn = null;\n    }\n  };\n\n  openGoogleOneTap = (props?: GoogleOneTapProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.openGoogleOneTap(props);\n    } else {\n      this.preopenOneTap = props;\n    }\n  };\n\n  closeGoogleOneTap = (): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.closeGoogleOneTap();\n    } else {\n      this.preopenOneTap = null;\n    }\n  };\n\n  openUserProfile = (props?: UserProfileProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.openUserProfile(props);\n    } else {\n      this.preopenUserProfile = props;\n    }\n  };\n\n  closeUserProfile = (): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.closeUserProfile();\n    } else {\n      this.preopenUserProfile = null;\n    }\n  };\n\n  openOrganizationProfile = (props?: OrganizationProfileProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.openOrganizationProfile(props);\n    } else {\n      this.preopenOrganizationProfile = props;\n    }\n  };\n\n  closeOrganizationProfile = (): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.closeOrganizationProfile();\n    } else {\n      this.preopenOrganizationProfile = null;\n    }\n  };\n\n  openCreateOrganization = (props?: CreateOrganizationProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.openCreateOrganization(props);\n    } else {\n      this.preopenCreateOrganization = props;\n    }\n  };\n\n  closeCreateOrganization = (): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.closeCreateOrganization();\n    } else {\n      this.preopenCreateOrganization = null;\n    }\n  };\n\n  openSignUp = (props?: SignUpProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.openSignUp(props);\n    } else {\n      this.preopenSignUp = props;\n    }\n  };\n\n  closeSignUp = (): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.closeSignUp();\n    } else {\n      this.preopenSignUp = null;\n    }\n  };\n\n  mountSignIn = (node: HTMLDivElement, props: SignInProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.mountSignIn(node, props);\n    } else {\n      this.premountSignInNodes.set(node, props);\n    }\n  };\n\n  unmountSignIn = (node: HTMLDivElement): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.unmountSignIn(node);\n    } else {\n      this.premountSignInNodes.delete(node);\n    }\n  };\n\n  mountSignUp = (node: HTMLDivElement, props: SignUpProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.mountSignUp(node, props);\n    } else {\n      this.premountSignUpNodes.set(node, props);\n    }\n  };\n\n  unmountSignUp = (node: HTMLDivElement): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.unmountSignUp(node);\n    } else {\n      this.premountSignUpNodes.delete(node);\n    }\n  };\n\n  mountUserProfile = (node: HTMLDivElement, props: UserProfileProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.mountUserProfile(node, props);\n    } else {\n      this.premountUserProfileNodes.set(node, props);\n    }\n  };\n\n  unmountUserProfile = (node: HTMLDivElement): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.unmountUserProfile(node);\n    } else {\n      this.premountUserProfileNodes.delete(node);\n    }\n  };\n\n  mountOrganizationProfile = (node: HTMLDivElement, props: OrganizationProfileProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.mountOrganizationProfile(node, props);\n    } else {\n      this.premountOrganizationProfileNodes.set(node, props);\n    }\n  };\n\n  unmountOrganizationProfile = (node: HTMLDivElement): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.unmountOrganizationProfile(node);\n    } else {\n      this.premountOrganizationProfileNodes.delete(node);\n    }\n  };\n\n  mountCreateOrganization = (node: HTMLDivElement, props: CreateOrganizationProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.mountCreateOrganization(node, props);\n    } else {\n      this.premountCreateOrganizationNodes.set(node, props);\n    }\n  };\n\n  unmountCreateOrganization = (node: HTMLDivElement): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.unmountCreateOrganization(node);\n    } else {\n      this.premountCreateOrganizationNodes.delete(node);\n    }\n  };\n\n  mountOrganizationSwitcher = (node: HTMLDivElement, props: OrganizationSwitcherProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.mountOrganizationSwitcher(node, props);\n    } else {\n      this.premountOrganizationSwitcherNodes.set(node, props);\n    }\n  };\n\n  unmountOrganizationSwitcher = (node: HTMLDivElement): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.unmountOrganizationSwitcher(node);\n    } else {\n      this.premountOrganizationSwitcherNodes.delete(node);\n    }\n  };\n\n  mountOrganizationList = (node: HTMLDivElement, props: OrganizationListProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.mountOrganizationList(node, props);\n    } else {\n      this.premountOrganizationListNodes.set(node, props);\n    }\n  };\n\n  unmountOrganizationList = (node: HTMLDivElement): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.unmountOrganizationList(node);\n    } else {\n      this.premountOrganizationListNodes.delete(node);\n    }\n  };\n\n  mountUserButton = (node: HTMLDivElement, userButtonProps: UserButtonProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.mountUserButton(node, userButtonProps);\n    } else {\n      this.premountUserButtonNodes.set(node, userButtonProps);\n    }\n  };\n\n  unmountUserButton = (node: HTMLDivElement): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.unmountUserButton(node);\n    } else {\n      this.premountUserButtonNodes.delete(node);\n    }\n  };\n\n  addListener = (listener: ListenerCallback): UnsubscribeCallback => {\n    const callback = () => this.clerkjs?.addListener(listener);\n\n    if (this.clerkjs) {\n      return callback() as UnsubscribeCallback;\n    } else {\n      this.premountMethodCalls.set('addListener', callback);\n      return () => this.premountMethodCalls.delete('addListener');\n    }\n  };\n\n  navigate = (to: string): void => {\n    const callback = () => this.clerkjs?.navigate(to);\n    if (this.clerkjs && this.#loaded) {\n      void callback();\n    } else {\n      this.premountMethodCalls.set('navigate', callback);\n    }\n  };\n\n  redirectWithAuth = async (...args: Parameters<Clerk['redirectWithAuth']>): Promise<unknown> => {\n    const callback = () => this.clerkjs?.redirectWithAuth(...args);\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('redirectWithAuth', callback);\n      return;\n    }\n  };\n\n  redirectToSignIn = async (opts: SignInRedirectOptions): Promise<unknown> => {\n    const callback = () => this.clerkjs?.redirectToSignIn(opts as any);\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('redirectToSignIn', callback);\n      return;\n    }\n  };\n\n  redirectToSignUp = async (opts: SignUpRedirectOptions): Promise<unknown> => {\n    const callback = () => this.clerkjs?.redirectToSignUp(opts as any);\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('redirectToSignUp', callback);\n      return;\n    }\n  };\n\n  redirectToUserProfile = async (): Promise<unknown> => {\n    const callback = () => this.clerkjs?.redirectToUserProfile();\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('redirectToUserProfile', callback);\n      return;\n    }\n  };\n\n  redirectToAfterSignUp = (): void => {\n    const callback = () => this.clerkjs?.redirectToAfterSignUp();\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('redirectToAfterSignUp', callback);\n    }\n  };\n\n  redirectToAfterSignIn = (): void => {\n    const callback = () => this.clerkjs?.redirectToAfterSignIn();\n    if (this.clerkjs && this.#loaded) {\n      callback();\n    } else {\n      this.premountMethodCalls.set('redirectToAfterSignIn', callback);\n    }\n  };\n\n  redirectToAfterSignOut = (): void => {\n    const callback = () => this.clerkjs?.redirectToAfterSignOut();\n    if (this.clerkjs && this.#loaded) {\n      callback();\n    } else {\n      this.premountMethodCalls.set('redirectToAfterSignOut', callback);\n    }\n  };\n\n  redirectToOrganizationProfile = async (): Promise<unknown> => {\n    const callback = () => this.clerkjs?.redirectToOrganizationProfile();\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('redirectToOrganizationProfile', callback);\n      return;\n    }\n  };\n\n  redirectToCreateOrganization = async (): Promise<unknown> => {\n    const callback = () => this.clerkjs?.redirectToCreateOrganization();\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('redirectToCreateOrganization', callback);\n      return;\n    }\n  };\n\n  handleRedirectCallback = (params: HandleOAuthCallbackParams): void => {\n    const callback = () => this.clerkjs?.handleRedirectCallback(params);\n    if (this.clerkjs && this.#loaded) {\n      void callback()?.catch(() => {\n        // This error is caused when the host app is using React18\n        // and strictMode is enabled. This useEffects runs twice because\n        // the clerk-react ui components mounts, unmounts and mounts again\n        // so the clerk-js component loses its state because of the custom\n        // unmount callback we're using.\n        // This needs to be solved by tweaking the logic in uiComponents.tsx\n        // or by making handleRedirectCallback idempotent\n      });\n    } else {\n      this.premountMethodCalls.set('handleRedirectCallback', callback);\n    }\n  };\n\n  handleGoogleOneTapCallback = (\n    signInOrUp: SignInResource | SignUpResource,\n    params: HandleOAuthCallbackParams,\n  ): void => {\n    const callback = () => this.clerkjs?.handleGoogleOneTapCallback(signInOrUp, params);\n    if (this.clerkjs && this.#loaded) {\n      void callback()?.catch(() => {\n        // This error is caused when the host app is using React18\n        // and strictMode is enabled. This useEffects runs twice because\n        // the clerk-react ui components mounts, unmounts and mounts again\n        // so the clerk-js component loses its state because of the custom\n        // unmount callback we're using.\n        // This needs to be solved by tweaking the logic in uiComponents.tsx\n        // or by making handleRedirectCallback idempotent\n      });\n    } else {\n      this.premountMethodCalls.set('handleGoogleOneTapCallback', callback);\n    }\n  };\n\n  handleEmailLinkVerification = async (params: HandleEmailLinkVerificationParams): Promise<void> => {\n    const callback = () => this.clerkjs?.handleEmailLinkVerification(params);\n    if (this.clerkjs && this.#loaded) {\n      return callback() as Promise<void>;\n    } else {\n      this.premountMethodCalls.set('handleEmailLinkVerification', callback);\n    }\n  };\n\n  authenticateWithMetamask = async (params: AuthenticateWithMetamaskParams): Promise<void> => {\n    const callback = () => this.clerkjs?.authenticateWithMetamask(params);\n    if (this.clerkjs && this.#loaded) {\n      return callback() as Promise<void>;\n    } else {\n      this.premountMethodCalls.set('authenticateWithMetamask', callback);\n    }\n  };\n\n  authenticateWithGoogleOneTap = async (\n    params: AuthenticateWithGoogleOneTapParams,\n  ): Promise<SignInResource | SignUpResource> => {\n    const clerkjs = await this.#waitForClerkJS();\n    return clerkjs.authenticateWithGoogleOneTap(params);\n  };\n\n  createOrganization = async (params: CreateOrganizationParams): Promise<OrganizationResource | void> => {\n    const callback = () => this.clerkjs?.createOrganization(params);\n    if (this.clerkjs && this.#loaded) {\n      return callback() as Promise<OrganizationResource>;\n    } else {\n      this.premountMethodCalls.set('createOrganization', callback);\n    }\n  };\n\n  getOrganization = async (organizationId: string): Promise<OrganizationResource | void> => {\n    const callback = () => this.clerkjs?.getOrganization(organizationId);\n    if (this.clerkjs && this.#loaded) {\n      return callback() as Promise<OrganizationResource>;\n    } else {\n      this.premountMethodCalls.set('getOrganization', callback);\n    }\n  };\n\n  signOut: SignOut = async (\n    signOutCallbackOrOptions?: SignOutCallback | SignOutOptions,\n    options?: SignOutOptions,\n  ): Promise<void> => {\n    const callback = () => this.clerkjs?.signOut(signOutCallbackOrOptions as any, options);\n    if (this.clerkjs && this.#loaded) {\n      return callback() as Promise<void>;\n    } else {\n      this.premountMethodCalls.set('signOut', callback);\n    }\n  };\n}\n","import type {\n  ActiveSessionResource,\n  InitialState,\n  OrganizationCustomPermissionKey,\n  OrganizationCustomRoleKey,\n  OrganizationResource,\n  Resources,\n  UserResource,\n} from '@clerk/types';\n\nexport const deriveState = (clerkLoaded: boolean, state: Resources, initialState: InitialState | undefined) => {\n  if (!clerkLoaded && initialState) {\n    return deriveFromSsrInitialState(initialState);\n  }\n  return deriveFromClientSideState(state);\n};\n\nconst deriveFromSsrInitialState = (initialState: InitialState) => {\n  const userId = initialState.userId;\n  const user = initialState.user as UserResource;\n  const sessionId = initialState.sessionId;\n  const session = initialState.session as ActiveSessionResource;\n  const organization = initialState.organization as OrganizationResource;\n  const orgId = initialState.orgId;\n  const orgRole = initialState.orgRole as OrganizationCustomRoleKey;\n  const orgPermissions = initialState.orgPermissions as OrganizationCustomPermissionKey[];\n  const orgSlug = initialState.orgSlug;\n  const actor = initialState.actor;\n\n  return {\n    userId,\n    user,\n    sessionId,\n    session,\n    organization,\n    orgId,\n    orgRole,\n    orgPermissions,\n    orgSlug,\n    actor,\n  };\n};\n\nconst deriveFromClientSideState = (state: Resources) => {\n  const userId: string | null | undefined = state.user ? state.user.id : state.user;\n  const user = state.user;\n  const sessionId: string | null | undefined = state.session ? state.session.id : state.session;\n  const session = state.session;\n  const actor = session?.actor;\n  const organization = state.organization;\n  const orgId: string | null | undefined = state.organization ? state.organization.id : state.organization;\n  const orgSlug = organization?.slug;\n  const membership = organization\n    ? user?.organizationMemberships?.find(om => om.organization.id === orgId)\n    : organization;\n  const orgPermissions = membership ? membership.permissions : membership;\n  const orgRole = membership ? membership.role : membership;\n\n  return {\n    userId,\n    user,\n    sessionId,\n    session,\n    organization,\n    orgId,\n    orgRole,\n    orgSlug,\n    orgPermissions,\n    actor,\n  };\n};\n","import './polyfills';\n\nimport { setErrorThrowerOptions } from './errors/errorThrower';\n\nexport * from './components';\nexport * from './contexts';\n\nexport * from './hooks';\nexport { useEmailLink } from './hooks/useEmailLink';\nexport type { BrowserClerk, ClerkProp, HeadlessBrowserClerk, ClerkProviderProps } from './types';\n\nsetErrorThrowerOptions({ packageName: PACKAGE_NAME });\n"]},"metadata":{},"sourceType":"module"}